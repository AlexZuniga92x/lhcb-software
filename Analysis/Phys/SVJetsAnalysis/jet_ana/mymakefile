ROOTCFLAGS    = $(shell root-config --cflags)
ROOTLIBS      = $(shell root-config --libs) -lMLP -lTreePlayer -lMinuit
ROOTGLIBS     = $(shell root-config --glibs)
TMVALIB	      = `pwd`/TMVA/lib/libTMVA.so
TMVALIB	      = ./TMVA/lib/libTMVA.so
#TMVAFLAG      = -I./TMVA
TMVAFLAG      = -I./TMVA/include/

CXX           = g++
CXXFLAGS      = -g -I$(ROOTSYS)/include -O -Wall -fPIC
LD            = g++
SOFLAGS       = -shared


CXXFLAGS     += $(ROOTCFLAGS)
LIBS          = $(ROOTLIBS)
GLIBS         = $(ROOTGLIBS)

all: zbbana

ZbbAnaOBJ = lib/evtsel.o  lib/histograms.o  lib/selvars.o lib/RunJES.o

zbbana:	$(ZbbAnaOBJ) RunZbbAna.exe

### SELECTION OBJECTS/EXECUTABLE ###

lib/evtsel.o: include/evtsel.cc include/evtsel.h
	$(CXX) -ggdb -c $(ROOTCFLAGS) $<
	mv evtsel.o lib/

lib/RunJES.o: include/RunJES.cc include/*
	$(CXX) -ggdb -c $(ROOTCFLAGS) $<
	mv RunJES.o lib/

lib/histograms.o: include/histograms.cc include/histograms.h
	$(CXX) -ggdb -c $(ROOTCFLAGS) $<
	mv histograms.o lib/

lib/selvars.o: include/selvars.cc include/selvars.h
	$(CXX) -ggdb -c $(ROOTCFLAGS) $<
	mv selvars.o lib/

RunZbbAna.exe: $(ZbbAnaOBJ)
	$(CXX) -rdynamic -o RunJES.exe $(ZbbAnaOBJ) $(ROOTLIBS) -L./lib64 -ldl

clean:
	rm -f lib/*.o lib/*.so core* RunJES*exe

