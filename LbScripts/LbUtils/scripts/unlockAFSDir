#!/usr/bin/env python
# $Id$
""" This script is made for readding the write access of an AFS directory """

from LbUtils.Script import Script
from LbUtils.CVS import CVS2Version
from LbUtils.afs.directory import Directory

import sys

__version__ = CVS2Version("$Name: $", "$Revision: $")

class UnlockAFSDirScript(Script):
    _version = __version__
    _description = __doc__
    def defineOpts(self):
        parser = self.parser
        parser.set_defaults(recursive=False)
        parser.add_option("-R", "--recursive",
                          dest="recursive",
                          action= "store_true",
                          help="lock recursively")
    def main(self):
        opts = self.options
        for a in self.args :
            d = Directory(a)
            d.unlockACL(opts.recursive)
        return 0

if __name__ == '__main__':
    s = UnlockAFSDirScript(usage="%prog [options] path")
    sys.exit(s.run())
