#!/usr/bin/env python
# $Id: $
""" This script is returning the path to a CMT project or path """

from LbUtils.CMT import CMTWhich
from LbUtils.Script import Script

import logging
import sys


class CMTWhichScript(Script):
    _description = __doc__
    def defineOpts(self):
        parser = self.parser
        parser.set_defaults(casesense=True)
        parser.add_option("-i", "--case-insensitive",
                          action="store_false",
                          dest="casesense",
                          help="case insensitive version")

    def main(self):
        log = logging.getLogger()
        opts = self.options
        args = self.args
        if len(args) < 1 :
            log.error("Not enough arguments")
            return 1

        project = args[0]
        package = None
        version = None
        if len(args) > 1 :
            package = args[1]

        if len(args) > 2 :
            version = args[2]

        print CMTWhich(project, package, version,
                       all_occurences=False,
                       casesense=opts.casesense)

        return 0

if __name__ == '__main__':
    s = CMTWhichScript(usage="%prog project [version]")
    sys.exit(s.run())
