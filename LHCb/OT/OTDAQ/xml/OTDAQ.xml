<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE gdd SYSTEM 'gdd.dtd'>

<gdd>
  <package name='OTDAQ'> 
  <import name="Kernel/CLHEPStreams"/>
  <import name="Event/RawBuffer"/>
  <import name="Event/RawBank"/>
  <import name="Event/RawEvent"/>

    <class name='GolHeader' 
           author='Jacopo Nardulli'
           desc='The Gol Header is a word of 32 bits that containes the address on an OT Module for the OTDAQ data format'>
       &StlVector;
      <constructor argList='int iWord, int iStation, int iLayer, int iQuarter, int iModule, int iOtisErFlag, int iSize' 
                   desc='constructor with word, station, layer, quarter, module, otisErFlag and size'>
        <code>    
                  m_golHeader = (iWord &lt;&lt; wordBits) +
                                (iStation &lt;&lt; stationBits) + 
                                (iLayer &lt;&lt; layerBits) + 
                                (iQuarter &lt;&lt; quarterBits) + 
                                (iModule &lt;&lt; moduleBits) + 
	                        (iOtisErFlag &lt;&lt; otisErFlagBits) + 
                                (iSize &lt;&lt; sizeBits);
        </code>
      </constructor>
      <constructor argList='const GolHeader aGolHeader' 
                   desc='copy constructor'>
        <code>
          m_golHeader = aGolHeader.m_golHeader;
        </code>
      </constructor>
      <constructor argList='int id' 
                   initList = 'm_golHeader(id)' 
                   desc='constructor with golHeader'>
        <code></code>
      </constructor>   

      <method type='' name='operator raw_int' const='TRUE' 
              desc='operator overload, for use of raw_int words'> 
        <code> return m_golHeader; </code>
      </method>

      <attribute type='bitfield' name='golHeader' desc='Gol Header ID'>
        <bitfield name='size' length='9' desc='Size' setMeth='FALSE'/>
	<bitfield name='otisErFlag' length='12' desc='OtisErFlag' setMeth='FALSE'/>
        <bitfield name='module' length='4' desc='Module' setMeth='FALSE'/>
        <bitfield name='quarter' length='2' desc='Quarter' setMeth='FALSE'/>
        <bitfield name='layer' length='2' desc='Layer' setMeth='FALSE'/>
        <bitfield name='station' length='2' desc='Station' setMeth='FALSE'/>
        <bitfield name='word' length='1' desc='Word' setMeth='FALSE'/>      
      </attribute>
    </class>



   <class name='DataWord' 
           author='Jacopo Nardulli'
           desc='The Data Word is a word of 32 bits that containes the data of 2 hits of the OT for the OTDAQ data format'>
       &StlVector;
      <constructor argList='int iWord, int ifirstOtis, int ifirstChannel, int ifirstTime, int iNull, int inextOtis, int inextChannel, int inextTime ' 
                   desc='constructor with word, firstOtis, firstChannel, firstTime, null, nextOtis, nextChannel, nextTime, '>
        <code>    
                  m_dataWord  = (iWord &lt;&lt; wordBits) +
                                (ifirstOtis &lt;&lt; firstOtisBits) +
                                (ifirstChannel &lt;&lt; firstChannelBits) +
                                (ifirstTime &lt;&lt; firstTimeBits) +
                                (iNull &lt;&lt; nullBits) +
                                (inextOtis &lt;&lt; nextOtisBits) +
                                (inextChannel &lt;&lt; nextChannelBits) +
                                (inextTime &lt;&lt; nextTimeBits);
 
        </code>
      </constructor>
      <constructor argList='const DataWord aDataWord' 
                   desc='copy constructor'>
        <code>
          m_dataWord = aDataWord.m_dataWord;
        </code>
      </constructor>
      <constructor argList='int id' 
                   initList = 'm_dataWord(id)' 
                   desc='constructor with DataWord'>
        <code></code>
      </constructor>

      <method type='' name='operator raw_int' const='TRUE' 
              desc='operator overload, for use of raw_int words'> 
        <code> return m_dataWord; </code>
      </method>

      <attribute type='bitfield' name='dataWord' desc='Gol Header ID'>  
        <bitfield name='nextTime' length='8' desc='nextTdcTime' setMeth='FALSE'/>  
        <bitfield name='nextChannel' length='5' desc='nextChannelID' setMeth='FALSE'/>  
        <bitfield name='nextOtis' length='2' desc='nextOtisID' setMeth='FALSE'/>  
        <bitfield name='null' length='1' desc='Null' setMeth='FALSE'/>  
        <bitfield name='firstTime' length='8' desc='firstTdcTime' setMeth='FALSE'/>  
        <bitfield name='firstChannel' length='5' desc='firstChannelIF' setMeth='FALSE'/>  
        <bitfield name='firstOtis' length='2' desc='firstOtisID' setMeth='FALSE'/>  
        <bitfield name='word' length='1' desc='Word' setMeth='FALSE'/>      
      </attribute>
    </class>


  </package>
</gdd>
