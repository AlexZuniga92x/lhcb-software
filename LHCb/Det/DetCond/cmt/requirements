# $Id: requirements,v 1.17 2002-03-28 08:57:13 andreav Exp $
package DetCond
version v2r1

branches DetCond cmt src doc

# GAUDI framework dependencies
use GaudiKernel v11r*
use GaudiSvc    v7r*

# ConditionsDB package
macro CONDDB_use            "CONDDB v3r02" \
      rh72_gcc29521         "CondDBOracle v3r10 Det"\
      rh72_gcc29521dbx      "CondDBOracle v3r10 Det"\
      rh72_gcc29521Static   "CondDBOracle v3r10 Det" \
      WIN32                 "CondDBOracle v3r10 Det"
use $(CONDDB_use)

# ConditionsDB package implementation
# This should be moved to CONDDB and CondDBOracle
set   CONDDB_implementation "CondDBObjy"   \
      rh72_gcc29521         "CondDBOracle" \
      rh72_gcc29521dbx      "CondDBOracle" \
      rh72_gcc29521Static   "CondDBOracle" \
      WIN32                 "CondDBOracle"

# Inform the C++ precompiler which ConditionsDB implementation is used
macro_append cppflags ' -D__$(CONDDB_implementation)__' \
             WIN32    ' /D "__$(CONDDB_implementation)__"'

# Detector Description
# This is only needed because updateObj assumes a Condition (TEMPORARY?)
use DetDesc v9r* Det

include_dirs $(DETCONDROOT)

# Build a component library
macro DetCond_sources "component/*.cpp" 
library DetCond $(DetCond_sources)

# Export the component library to dependent packages
apply_pattern package_Clinkopts
apply_pattern packageShr

apply_pattern ld_library_path

#==================================================================
private

apply_pattern package_Cshlibflags
macro_append DetCond_shlibflags " $(GaudiKernel_linkopts)"
macro_append DetCond_shlibflags " $(CONDDB_linkopts)" \
             WIN32              " $(CondDBOracle_linkopts)"





