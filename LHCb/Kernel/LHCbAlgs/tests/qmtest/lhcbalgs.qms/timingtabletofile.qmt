<?xml version="1.0" ?><!DOCTYPE extension  PUBLIC '-//QM/2.3/Extension//EN'  'http://www.codesourcery.com/qm/dtds/2.3/-//qm/2.3/extension//en.dtd'>
<extension class="GaudiTest.GaudiExeTest" kind="test">
  <argument name="program"><text>gaudirun.py</text></argument>
  <argument name="args"><set>
        <text>../options/file-timer.py</text>
  </set></argument>
  <argument name="validator"><text>
countErrorLines({"WARNING":0, "ERROR":0, "FATAL":0})
from LHCbAlgs import TTParser
missing,different,added=TTParser.compare("timing.dat","../refs/refsimpletiming.dat",threshold=1000.)
td=TTParser.event_av_dict("timing.dat")
rd=TTParser.event_av_dict("../refs/refsimpletiming.dat")
#ignore different timings in this test!
different=[d for d in different if td[d][0]!=rd[d][0]]
if len(missing+different+added):
  causes.append("Timing tables do not agree, check stdout")
  if len(missing):
    result["lhcbalgs.timingtabletofile.missing"]=result.Quote("Missing:\n\t"+"\n\t".join(missing))
  if len(different):
    result["lhcbalgs.timingtabletofile.different"]=result.Quote("Different:\n\t"+"\n\t".join(different))
  if len(added):
    result["lhcbalgs.timingtabletofile.added"]=result.Quote("Added:\n\t"+"\n\t".join(added))

</text></argument>
</extension>
