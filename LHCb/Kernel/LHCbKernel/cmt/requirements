# $Id: requirements,v 1.49 2004-02-02 14:13:05 jonesc Exp $
# =============================================================================
package LHCbKernel
author  M.Frank    CERN/LHCb
manager M.Cattaneo CERN/LHCb

version v4r2

include_dirs $(LHCBKERNELROOT)

use GaudiKernel  v15r*
use GaudiObjDesc v6r*

# Produce Header-Files from XML description, overriding default destination
#============================================================================
macro LHCbKernelObj2Doth_GODflags " -o ../Kernel/ " \
      WIN32                       " -o ..\Kernel\ "
document obj2doth LHCbKernelObj2Doth ../xml/LHCbKernel.xml

macro LHCbKernelObj2Dict_GODflags " -l Kernel/ " \
      WIN32                       " -l Kernel\ "
document obj2dict LHCbKernelObj2Dict ../xml/LHCbKernel.xml

# Produce lcg dictionary for stl containers used in LHCb
apply_pattern lcg_dictionary dictionary=LHCbKernel                  \
                             headerfiles=../Kernel/lcgStl.h     \
                             selectionfile=../xml/lcg_selection.xml \
                             options="-o ../dict/lcgStl_dict.cpp --split"


# Build libraries (including dictionary)
#============================================================================
library LHCbKernel     *.cpp
library LHCbKernelDict ../dict/*.cpp
        
# Standard patterns (order is essential)
#============================================================================
apply_pattern component_library library=LHCbKernelDict
apply_pattern linker_library    library=LHCbKernel

# Uncomment to find memory leaks in Relations - 
#============================================================================
#macro_append LHCbKernel_pp_cppflags '  -DCOUNT_INSTANCES  ' \
#        WIN32                       ' /D"COUNT_INSTANCES" '

# Test applications (currently not available in CVS!)
#============================================================================
#private
#application   RelationTest1  -check     Test/RelationTest1.cpp 
#application   RelationTest2  -check     Test/RelationTest2.cpp 
#application   RelationTest3  -check     Test/RelationTest3.cpp 
#application   RelationTest4  -check     Test/RelationTest4.cpp 
#application   RelationTest5  -check     Test/RelationTest5.cpp 
#macro_prepend RelationTest1linkopts   " $(LHCbKernel_linkopts) $(use_linkopts) "
#macro_prepend RelationTest2linkopts   " $(LHCbKernel_linkopts) $(use_linkopts) "
#macro_prepend RelationTest3linkopts   " $(LHCbKernel_linkopts) $(use_linkopts) "
#macro_prepend RelationTest4linkopts   " $(LHCbKernel_linkopts) $(use_linkopts) "
#macro_prepend RelationTest5linkopts   " $(LHCbKernel_linkopts) $(use_linkopts) "

#apply_pattern application_path
#path_remove   PATH                  "LHCbKernel"
#path_append   PATH                  ${LHCBKERNELROOT}/${BINDIR}
