<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE gdd SYSTEM 'gdd.dtd'>
<gdd>
  <package name='TrackEvent'>

<!-- ================= Measurement class definition ================= -->

    <class
      name        = 'Measurement'
      author      = 'Jose Hernando, Eduardo Rodrigues'
      desc        = 'Measurement is the base class for offline and online measurements.'
      serializers = 'FALSE' >

      <import name='CLHEP/Matrix/Vector' />
      <import name='Kernel/LHCbID' />

      &StlPtrVector;

<!--
  /** Measurement type enumerations
   *
   *   Unknown  : measurement of undefined type (this should never happen!)
   *   VeloR    : Velo-R measurement
   *   VeloPhi  : Velo-phi measurement
   *   TT       : TT measurement (ST measurement in the TT stations)
   *   IT       : IT measurement (ST measurement in the IT seeding stations)
   *   OT       : OT measurement in the seeding stations
   *   Muon     : Muon measurement
   *
   */
-->
      <enum
        name    = 'Type'
        value   = 'Unknown,VeloR,VeloPhi,TT,IT,OT,Muon'
        desc    = 'enumerator for the type of Measurement'
        access  = 'PUBLIC' />

     <attribute
       type    = 'bitfield'
       name    = 'mtype'
       desc    = 'the variety of measurement types'
       getMeth = 'FALSE'
       setMeth = 'FALSE'
       access  = 'PROTECTED'>
       <bitfield
         name      = 'type'
         length    = '6'
         type      = 'Type'
         getMeth   = 'FALSE'
         setMeth   = 'TRUE'
         checkMeth = 'FALSE'
         desc      = 'measurement type' />
      </attribute>

      <attribute
        type    = 'double'
        name    = 'z'
        desc    = 'the z-position of the measurement'
        access  = 'PROTECTED' />

      <attribute
        type    = 'double'
        name    = 'measure'
        desc    = 'the measurement value'
        access  = 'PROTECTED' />

      <attribute
        type    = 'double'
        name    = 'errMeasure'
        desc    = 'the measurement error'
        access  = 'PROTECTED' />

      <method
        type    = 'double'
        name    = 'errMeasure2'
        desc    = 'Retrieve const  the measurement error squared'
        const   = 'TRUE'>
        <code>
          return m_errMeasure * m_errMeasure;
        </code>
      </method>

      <method
        type    = 'double'
        name    = 'resolution'
        desc    = 'Retrieve the measurement error (Added temporarily to distinguish between the phi-error and Carthesian error in VeloPhiMeasurements)'
        const   = 'TRUE'
        virtual = 'TRUE'>
        <code>
          return m_errMeasure;
        </code>
      </method>

      <method
        type    = 'double'
        name    = 'resolution2'
        desc    = 'Retrieve the measurement error squared (Added temporarily to distinguish between the phi-error and Carthesian error in VeloPhiMeasurements)'
        const   = 'TRUE'
        virtual = 'TRUE'>
        <code>
          return m_errMeasure * m_errMeasure;
        </code>
      </method>

      <attribute
        type    = 'LHCbID'
        name    = 'lhcbID'
        desc    = 'the corresponding LHCbID'
        access  = 'PROTECTED' />

      <method
        type    = 'unsigned int'
        name    = 'type'
        desc    = 'Retrieve the measurement type'
        const   = 'TRUE'>
        <code>
  return (Measurement::Type)((m_mtype &amp; typeMask) &gt;&gt; typeBits);
        </code>
      </method>

      <method
        type    = 'bool'
        name    = 'checkType'
        argList = 'unsigned int type'
        desc    = 'Check the measurement type'
        const   = 'TRUE' />

      <method
        type    = 'Measurement*'
        name    = 'clone'
        desc    = 'Clone the measurement'
        const   = 'TRUE'
        virtual = 'TRUE'>
        <code>
  Measurement* me = new Measurement(); *me = *this; return me;
        </code>
      </method>

      <method
        name    = 'update'
        desc    = 'Update measurement parameters'
        argList = 'const HepVector refVector'
        virtual = 'TRUE'>
        <code>

        </code>
      </method>

    </class>

  </package>
</gdd>
