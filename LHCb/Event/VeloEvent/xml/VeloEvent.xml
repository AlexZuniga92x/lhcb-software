<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE gdd SYSTEM "gdd.dtd">
<gdd>
  <package name="VeloEvent">
    <import name="Kernel/CLHEPStreams"/>
    <class name="MCVeloHit" 
           id="4001"
           author="Chris Parkes" 
           desc="Raw GEANT hit information for VELO silicon sensors. It is populated by a Sicb converter (SicbMCVeloHitCnv) from the VRPR (VELO) and VPRW (pile-up) classes."
	   location="/Event/MC/Velo/Hit">
           <base name="MCHit"/>
          <import name="Event/MCHit"/>
           <attribute name="sensor" type="long" desc="Sensor Number"/>
    </class>

    <class name="MCVeloFE" 
           id="4002"
           author="Chris Parkes" 
           desc="This class represents the output of the front-end chip and contains information about the simulation of the silicon and FE chip response stored for a single silicon/output channel. Constructed from MCVeloHits (i.e. GEANT deposits), MCVeloFE of previous events (spill over), noise (above a threshold)"
           location="/Event/MC/Velo/FE">
           <base name="KeyedObject&lt;VeloChannelID&gt;"/>
           <import name="Kernel/VeloChannelID"/>
           <constructor desc="Constructor with key" 
                        initList="KeyedObject&lt;VeloChannelID&gt;(key),
                                  m_addedSignal(0.0),
                                  m_addedPedestal(0.0),
                                  m_addedNoise(0.0),
                                  m_addedCMNoise(0.0)" >
             <arg type="VeloChannelID" name="key" const="TRUE"/>
             <code/>                 
           </constructor> 
           <method name="channelID" type="VeloChannelID" desc="combined sensor and strip number ID" const="TRUE">
                   <code>return key();</code>
           </method>
           <method name="sensor" type="long" desc="Sensor Number" const="TRUE">
                  <code>return key().sensor();</code>
           </method>
           <method name="strip" type="long" desc="Strip Number" const="TRUE">
                 <code>return key().strip();</code>
           </method>
           <attribute name="addedSignal" type="double" desc="Added Signal in units of electrons"/>
           <attribute name="addedPedestal" type="double" desc="pedestal added in Si/FE chip simulation in units of electrons"/>
           <attribute name="addedNoise" type="double" desc="noise added in Si/FE chip simulation in units of electrons"/>
           <attribute name="addedCMNoise" type="double" desc="common mode noise added in Si/FE chip simulation in units of electrons"/>
 
           <relation name="MCVeloHits" type="MCVeloHit" desc="References to Monte Carlo hits contributing to this channel" multiplicity="m"/>

           <method name="charge" type="double"  desc="Access total charge - in electrons" const="TRUE">
	           <code>return addedSignal()+addedNoise()+addedPedestal()+addedCMNoise();</code>
           </method> 

    </class>

    <class name="VeloFullDigit" 
           id="4003"
           author="Chris Parkes" 
           desc="Full information on a reconstructed single digitised velo channel. This info. is available inside the data processor but is not normally output on DAQ stream for all channels. It does not contain any simulation information"
	   location="/Event/Rec/Velo/FullDigit">
           <base name="KeyedObject&lt;VeloChannelID&gt;"/>
           <constructor desc="Constructor with key" 
                        initList="KeyedObject&lt;VeloChannelID&gt;(key),
                                  m_ADCValue(0.0),
                                  m_rawADCValue(0),
                                  m_subtractedPedestal(0.0),
                                  m_subtractedCM(0.0),
                                  m_rawNoise(0.0),
                                  m_noise(0.0)">
             <arg type="VeloChannelID" name="key" const="TRUE"/>
             <code/>                 
           </constructor> 
           <method name="channelID" type="VeloChannelID" desc="combined sensor and strip number ID" const="TRUE">
                   <code>return key();</code>
           </method>
           <method name="sensor" type="long" desc="Sensor Number" const="TRUE">
                  <code>return key().sensor();</code>
           </method>
           <method name="strip" type="long" desc="Strip Number" const="TRUE">
                 <code>return key().strip();</code>
           </method>

           <attribute name="ADCValue" type="double" desc="ADC value with common mode noise and pedestal subtracted"/>
           <attribute name="rawADCValue" type="long" desc="ADC value WITHOUT common mode noise and pedestal subtracted i.e. an integer"/>
           <attribute name="subtractedPedestal" type="double" desc="pedestal subtracted from channel during processing"/>
           <attribute name="subtractedCM" type="double" desc="CM subtracted from channel during processing"/>
           <attribute name="rawNoise" type="double" desc="noise value WITHOUT common mode subtracted"/>
           <attribute name="noise" type="double" desc="noise value WITH common mode subtracted"/>
           <method name="signalToNoise" type="double" desc="signal to noise after common mode subtracted" const="TRUE">
                 <code>return adcValue()/noise();</code>
           </method>
    </class>

    <class name="VeloCluster" 
           id="4004"
           author="Chris Parkes" 
           desc="A cluster as on the DAQ output, after the data processor and without applying any additional processing. It contains no simulation info."
	   location="/Event/Rec/Velo/Cluster">
           <import name="Kernel/SerializeStl"/>
           <base name="KeyedObject&lt;int&gt;"/>
           <attribute name="sensor" type="long" desc="Sensor Number"/>
           <attribute name="stripSignals" type="std::vector&lt;std::pair&lt;long,double&gt; &gt;" desc="strip numbers and their signals"/>
           <method name="size" type="long" desc="number of strips in cluster" const="TRUE">
                 <code>return stripSignals().size();</code>
           </method>
    </class>

  </package>

</gdd>





