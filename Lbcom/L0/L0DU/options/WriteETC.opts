///////////////////////////////////////////////////////////////////////////////
/// Job options to write an ETC of L0 accepted events, also copying a file  ///
/// to write out only L0-accepted events. Input file must contain RawBuffer ///
///                                                                         ///
///   These options can be executed with any main program,                  ///
///   in an environment that has at least the following defined:            ///
///                                                                         ///
/// use GaudiSvc v*                                                         ///
/// use GaudiPoolDb v*                                                      ///
/// use GaudiConf v*                                                        ///
/// use HepMC v* LCG_Interfaces                                             ///
/// use DDDB v* Det                                                         ///
/// use ParamFiles v*                                                       ///
///////////////////////////////////////////////////////////////////////////////


//-------------------------------------------------------------------------
// Job options to copy one or more input files onto an output file
//-------------------------------------------------------------------------
#include "$STDOPTS/PoolCopy.opts"

//---------------------------------------------------------------------------
// Standard application setup
//---------------------------------------------------------------------------
#include "$STDOPTS/LHCbApplication.opts"
#include "$STDOPTS/DC06Conditions.opts"

EventClockSvc.EventTimeDecoder = "OdinTimeDecoder";

//---------------------------------------------------------------------------
// Run the L0
//---------------------------------------------------------------------------
ApplicationMgr.TopAlg = { "GaudiSequencer/L0", "L0Filter" };  
#include "$L0DUROOT/options/L0Sequence.opts"
InputCopyStream.RequireAlgs = { "L0Filter" };

//---------------------------------------------------------------------------
// Catalog for registering new files
//---------------------------------------------------------------------------
FileCatalog.Catalogs =  { "xmlcatalog_file:pool_xml_catalog.xml" } ;

//---------------------------------------------------------------------------
// Write out an ETC
//---------------------------------------------------------------------------
#include "$L0DUROOT/options/ETC.opts"

//---------------------------------------------------------------------------
// Some input (BB)
//---------------------------------------------------------------------------
EventSelector.Input   = {
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-v2-lumi2/00001889/DIGI/0000/00001889_00000136_4.digi' TYP='POOL_ROOTTREE' OPT='READ'"
};

//---------------------------------------------------------------------------
// Define the output file of filtered events. 
// Uncomment next line to switch off event output, i.e. to write only ETC
//---------------------------------------------------------------------------
//ApplicationMgr.OutStream -= { "InputCopyStream/InputCopyStream"};
InputCopyStream.Output = "DATAFILE='PFN:DigiCopy.digi' TYP='POOL_ROOTTREE' OPT='REC'";
