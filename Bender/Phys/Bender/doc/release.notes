<PRE>
! -----------------------------------------------------------------------------
! $Id$
! -----------------------------------------------------------------------------
! Package     : Phys/Bender
! Responsible : Vanya BELYAEV Ivan.Belyaev@nikhef.nl
! Purpose     : Python-based environment for Physics Analysis 
! -----------------------------------------------------------------------------
!                   $Revision$
! Last modification $Date$
!                by $Author$
! -----------------------------------------------------------------------------
!
! This file is a part of  Bender project:
! ``Python-based Interactive Environment for Smart and Friendly Physics Analysis''
!
! The package has been designed with the kind help from
! Pere MATO and Andrey TSAREGORODTSEV. It is based on the 
! LoKi project: ``C++ ToolKit for Smart and Friendly Physics Analysis''
!
! By usage of this code one clearly states the disagreement 
! with the smear campaign of Dr.O.Callot et al.: 
! ``No Vanya's lines are allowed in LHCb/Gaudi software.''
!
! -----------------------------------------------------------------------------

! ==================== Phys/Bender v28r2 2016-02-27 ===========================

! 2016-02-27 - Vanya Belyaev
 - small fixes 

! 2016-02-27 - Vanya Belyaev
 - TEMPORARY: use "long" version of Logger
 
! 2016-02-25 - Vanya Belyaev
 - irun:
   add two arguments: 
   1. "progress" to display progress bar 
   2. "runing"   to display running bar 

! 2016-02-21 - Vanya Belyaev

 - add printout for MsgStream:

      with self.info() : 
          self.info() << " This will be INFO print "

  or 
      info = self.info() 
      with info : 
           info << " print something "

! ==================== Phys/Bender v28r1 2016-02-21 ===========================

! 2016-02-21 - Vanya Belyaev
 - more fixes in logging and colorization
 - fix treatment of RawEvent for dst-dump 


! 2016-02-19 - Vanya Belyaev
 - more fixes to data-access utilitis 
 - improve logging and colorization 
 - add function run_progress for running "with progress bar"
    >>> run_progress(100)


! 2016-02-19 - Vanya Belyaev
 - bender : 
   1) allow '-g/--grid'  option to get a list of GRID sites to look for data  (default is [ CERN ] ) e.g.

      bender /lhcb/MC/2012/ALLSTREAMS.DST/00037532/0000/00037532_00000245_1.allstreams.dst -g RAL PIC

      the order of elements in the list defines the relative priority 
   2) add option '--no-color' that suprpeses the colorized prints (both logging and Gaudi)

! 2016-02-17 - Vanya Belyaev
 - fix get-grid-url and grid_url.py scripts 

! 2016-02-17 - Vanya Belyaev

 - add iMagneticFieldSvc and iLHCbMagnetSvc - python wrappers 
    for magentic field services
 - add accessors for these services for AppMgr 
     (thanks to Carlos Vazquez Serra for idea)

    >>> gaudi  = appMgr()
    >>> magnet = gaudi.magSvc() 
    >>> help(magnet)
    >>> xyz    = Gaudi.Point3D( 0 , 0 , 5.2 * meter )
    >>> print magnet.field ( xyz ) 
    >>> print magnet.isDown() 
    >>> print magnet.isUp  () 

! ==================== Phys/Bender v28r0 2016-02-12 ===========================

! 2016-02-12 - Vanya Belyaev
 - add a useful function irun     (run over event using 'generator')
   It can be rather useful for scripts:

   Run over events till the certain number of good events is found

   def accept_function () :  ... 


   for i in irun ( 100 , accept_function ) :
    ...         hdr = get('/Event/Rec/Header')
    ...         print hdr.runNumber(), hdr.eventNumber()

    e.g. one can select events with at least 2 J/psi:
    good_events = lambda : 2<= len(get('/Event/PSIX/Phys/SelDetachedPsisForBandQ/Particles'))
 

! 2016-02-06 - Vanya BELYAEV
 - improve printout for iAlgTool
 
! 2016-02-05 - Vanya Belyaev
 - Fixes_Gaudi.py
   - iAlgTool: add posiibility to use interface methods
   - iToolSvc: add mehtod 'tool' to be coherent with GaudiAlgorithm(/Tool::tool methods 

! 2016-01-28 - Vanya Belyaev
 - more improvements for histos&tuples 
 - fix the issue with pending tuples in interactive  mode 
 - fix excessive printout from GaudiPython.TupleUtils  (to  fixed in Gaudi)
 - add new property '--histofile' 
      the value, if non-empty, is propagated to 'HistogramFile' property of DaVinci
 - import GaudiPython.HistoUtils if 'histofile' activated 
 - import GaudiPython.TupleUtils if 'tuplefile' activated 

! 2016-01-28 - Vanya Belyaev
 - add opportunity to get & inspect input file list from EventSelector
 - new function in module Bender.DataUtils: evtSelInput ( filelist )


! 2016-01-27 - Vanya Belyaev
 - bender: 
   1) add new property "-t/--tuplefile" 
      the value, if non-empty, is propagated to 'TupleFile' property of DaVinci

   2) at the end release all "active" tuples created 
      with GaudiPython.TupleUtils module 


! 2016-01-23 - Vanya Belyaev
 - reduce number of startup files 
 - improve logging 

! 2016-01-21 - Vanya Belyaev
 - add proper function to rewinding  (many thanks to Thomas RUF)

! 2016-01-19 - Vanya Belyaev
 - add startup files 
 - remove option '-c --castor'
 - add option    '-n --no-castor'

! 2015-12-15 - Vanya Belyaev

 - Bender.Utils.setData  
   - add more intelligent treatment of file catalogs 


! ==================== Phys/Bender v27r0p1 2015-11-02 =========================
! ==================== Phys/Bender v27r0   2015-10-26 =========================
! ==================== Phys/Bender v26r3p1 2015-08-28 =========================
! ==================== Phys/Bender v26r3   2015-08-25 =========================
! ==================== Phys/Bender v26r2p1 2015-08-17 =========================
! ==================== Phys/Bender v26r2   2015-08-16 =========================

! 2015-08-16 - Vanya Belyaev
 - resurrect access to files  via grid 
 
! 2015-08-16 - Vanya Belyaev
 - simplify Fill&TisTos
 - reduce aliases 

! 2015-08-14 - Vanya Belyaev
 - update bender-based scripts 


! ==================== Phys/Bender v26r1   2015-08-08 =========================
! ==================== Phys/Bender v26r0   2015-07-29 =========================
! ==================== Phys/Bender v25r7p4 2015-07-10 =========================
! ==================== Phys/Bender v25r7p3 2015-07-01 =========================
! ==================== Phys/Bender v25r7p2 2015-06-22 =========================

! 2015-06-22 - Vanya Belyaev
 - minor modification to allow import options 

! ==================== Phys/Bender v25r7p1 2015-06-15 =========================
! ==================== Phys/Bender v25r7   2015-06-04 =========================
! ==================== Phys/Bender v25r6   2015-05-07 =========================

! 2015-04-18 - Vanya Belyaev
 - DataUtils.py
   fix 

! 2015-04-17 - Vanya Belyaev
 - DataUtils.py
   fix 

! 2015-04-13 - Vanya Belyaev
 - DataUtils.py
   1. extend a bit treatment of raw/mdf files, in particular "mdf:"  prefix is added 
   2. simplify usage of file from local EOS area (avodi confusion with GRID EOS area) 

  now simple names are accepted, e.g.:

     dst-explorer /eos/lhcb/user/j/johndan/Analysis/CEP/Trigger2015/150526_0000000001.raw
     dst-explorer  eos/lhcb/user/j/johndan/Analysis/CEP/Trigger2015/150526_0000000001.raw
     dst-explorer     /lhcb/user/j/johndan/Analysis/CEP/Trigger2015/150526_0000000001.raw


! ==================== Phys/Bender v25r5p1 2015-03-20 =========================
! ==================== Phys/Bender v25r5   2015-03-18 =========================
! ==================== Phys/Bender v25r4   2015-03-18 =========================

! 2015-03-18 - Vanya Belyaev
 - tag as v25r4 

! 2015-03-17 - Vanya Belyaev
 - play a bit with return codes 

! ==================== Phys/Bender v25r3   2014-12-18 =========================
! ==================== Phys/Bender v25r2   2014-11-09 =========================
! ==================== Phys/Bender v25r1   2014-11-09 =========================

! 2014-11-09 - Vanya Belyaev
 - 

! ==================== Phys/Bender v25r0   2014-07-30 =========================

! 2014-07-30 - Pieter David
 - DataUtils.py: when accessing a file by LFN, the --grid option now takes
   a site name (e.g. LCG.CERN.ch) instead of a storage element name
   (e.g. CERN_MC-DST-EOS) as value

! ==================== Phys/Bender v24r2   2014-07-07 =========================
! ==================== Phys/Bender v24r1   2014-06-18 =========================

! 2014-06-18 - Vanya Belyaev
 - prepare v24r1 

! 2014-06-16 - Vanya Belyaev
 - many tiny improvements 

! ==================== Phys/Bender v24r0   2014-05-20 =========================

! 2014-05-18 - Vanya Belyaev
 - rename BENDERDATAPREFIX to BENDERDATAPATH 

! 2014-05-17 - Vanya Belyaev
 - DataUtils.py
   add possibility to prepend the file names 
   with the content of BENDERDATAPREFIX environment variable  

! ==================== Phys/Bender v23r4   2014-04-26 =========================


! ==================== Phys/Bender v23r3r1 2014-04-05 =========================

! 2014-04-05 - Vanya Belyaev
 - remove PyCintex 

! ==================== Phys/Bender v23r3   2014-04-05 =========================

! 2014-04-04 - Roel Aaij
 - Add try: except to some subprocess calls in case the command is not in the
   path, for example at remote sites.

! ==================== Phys/Bender v23r2   2014-03-11 =========================
! ==================== Phys/Bender v23r1p1 2014-03-09 =========================
! ==================== Phys/Bender v23r1   2014-03-07 =========================
! ==================== Phys/Bender v23r0   2014-03-04 =========================

! 2014-03-04 - Vanya Belyaev
 - prepare new release 

! 2014-03-01 - Vanya Belyaev
 - DataUtils:
   prepare to the new EOS structure of directories 

! 2014-02-03 - Vanya Belyaev
 - DataUtils:  substitute 'castor:' with 'root:'

! 2014-01-21 - Marco Clemencic
 - Added CMake configuration file.

! ==================== Phys/Bender v22r11  2013-12-22 =========================

! 2013-12-22 - Vanya Belyaev
 - use new verison of DaVinci v33r9 

! ==================== Phys/Bender v22r10  2013-11-25 =========================

! 2013-11-25 - Vanya Belyaev
 - use new verison of DaVinci v33r8 

! ==================== Phys/Bender v22r9   2013-10-11 =========================

! 2013-10-11 - Vanya Belyaev
 - use newer version of DaVinci v33r7p1 
 - update standard scripts 

! ==================== Phys/Bender v22r8p1 2013-09-25 =========================

! 2013-09-25 - Vanya Belyaev

  - use newer version of DaVinci
  - fix db-tags scrips 
  - new script "no-mc-decays"

! ==================== Phys/Bender v22r8   2013-08-10 =========================
! ==================== Phys/Bender v22r7p1 2013-07-13 =========================

! 2013-07-13 - Vanya Belyaev
 - prepare new version 

! ==================== Phys/Bender v22r7   2013-06-20 =========================

! 2013-06-20 - Vanya Belyaev
 - use new DaVinci 

! ==================== Phys/Bender v22r6   2013-05-10 =========================

! 2013-05-10 - Vanya Belyaev
 - use new DaVinci 

! ==================== Phys/Bender v22r5p3 2013-05-06 =========================
! ==================== Phys/Bender v22r5p2 2013-04-26 =========================

 use new DaVincni v33r3p2 

! ==================== Phys/Bender v22r5p1 2013-04-14 =========================

! ==================== Phys/Bender v22r5   2013-04-13 =========================

! 2013-04-13 - Vanya Belyaev

   - new verison based on DaVinci v33r3 

! ==================== Phys/Bender v22r4p1 2013-03-13 =========================
! ==================== Phys/Bender v22r4   2013-02-23 =========================

! 2013-02-23 - Vanya Belyaev


 - fixes for DataUtils and Grid-access 

   restore proper access to Grid files 

 - fix extraction of DB-tags from file. Now it is a little bit slower, 
   but more robust and easier to debug in case of problmes.
 
! ==================== Phys/Bender v22r3   2012-12-05 =========================
! ==================== Phys/Bender v22r2p1 2012-10-28 =========================
! ==================== Phys/Bender v22r2   2012-10-27 =========================
! ==================== Phys/Bender v22r1p1 2012-10-27 =========================
! ==================== Phys/Bender v22r1   2012-10-27 =========================

! 2012-10-27 - Vanya Belyaev
 - add possibility for the direct access to local grid files 

! ==================== Phys/Bender v22r0   2012-09-13 =========================

! ==================== Phys/Bender v21r2p2 2012-09-08 =========================

! 2012-10-08 - Vanya Belyaev

 - add possibiilty to access EOS-files (needed for Stripping 20 ) 


! ==================== Phys/Bender v21r2p1 2012-09-04 =========================

! 2012-10-04 - Vanya Belyaev
 - prepare v21r2p1 


! ==================== Phys/Bender v21r2 2012-09-12 ===========================

! 2012-09-12 - Vanya Belyaev
 - prepare v21r2 

! ==================== Phys/Bender v21r1 2012-08-22 ===========================

! 2012-08-22 - Vanya Belyaev
 - 

! ==================== Phys/Bender v21r0 2012-07-10 ===========================

! 2012-07-10 - Vanya Belyaev
 -  

! ==================== Phys/Bender v20r0 2012-07-10 ===========================

! 2012-07-10 - Vanya Belyaev
 - new version based on new DaVinci 

! 2012-06-12 - Vanya Belyaev
 - move many utilities to BenderTools 

! 2012-06-11 - Vanya Belyaev
 - Gaudi_Fixes : fix a typo 


! ==================== Phys/Bender v19r7 2012-05-24 ===========================

! 2012-05-24 - Vanya Belyaev
 - many minor fixes 

! ==================== Phys/Bender v19r6 2012-05-06 ===========================

! 2012-05-02 - Vanya Belyaev

 - move MicroDST into BenderTools package 


! ==================== Phys/Bender v19r5 2012-04-29 ===========================

! 2012-04-29 - Vanya Belyaev
 - minor fix in MicroDST

! ==================== Phys/Bender v19r4 2012-04-24 ===========================

! ==================== Phys/Bender v19r3 2012-04-10 ===========================

! 2012-04-10 - Vanya Belyaev

 - remove all tools into separate package 

! 2012-04-08 - Vanya Belyaev
 - add GenCuts script 

! ==================== Phys/Bender v19r2 2012-04-04 ===========================

! 2012-04-04 - Vanya Belyaev

  new verison foer DaVinci v30r2p1 


! ==================== Phys/Bender v19r1 2012-02-21 ===========================

! 2012-02-21 - Vanya Belyaev
 - add TisTosMC.
 

! 2012-02-18 - Vanya Belyaev

 - remove PyRoot and alias 

! ==================== Phys/Bender v19r0 2012-02-15 ===========================

! 2012-02-15 - Vanya Belyaev
 - add pyroot script 
 - restore TisTos functionality, use new interface

! 2011-12-18 - Eduardo Rodrigues
 - Minor fix in CheckTrg.py

! ==================== Phys/Bender v18r4P1 2012-01-06 =========================

! 2012-01-06 - Vanya Belyaev

 - TisTos module: 

     (tmp?) DISABLE usage of TUS/TSP for n-tuples..
 
! ==================== Phys/Bender v18r4 2011-12-18 ===========================

! 2011-12-18 - Vanya Belyaev

 - TisTos module: 

      - add TPS category for classification 
      - add TPS/TUS bits in n-tuple 

 - dst-explorer, dst-dump, trg-check
      - more coherent setting of properties & parameters 

 - add possibility to copy "interetsing" events into output, it is as simple as:
 
    >>> writeEvent() 

! ==================== Phys/Bender v18r3 2011-11-23 ===========================

! 2011-11-23 - Vanya Belyaev

 - v18r3 

! 2011-11-01 - Vanya Belyaev

 - minor fix in CheckTrg 

   Without the fix one needs to specify full TES/DST location.
   The "short" form does not work.

   Thanks to Adam Webber for providing microDST for tests...

! ==================== Phys/Bender v18r2 2011-09-26 ===========================

! 2011-11-01 - Vanya Belyaev
 - tag as v18r2 

! 2011-10-28 - Vanya Belyaev

 - fix iterator sfomr SharedObjectsContainer 

    many thanks to Roel for the kind help


! 2011-10-25 - Vanya Belyaev

 - add new script  dst-dump 

   to dump the content of (x)DST

  +----------------------------------------------------------------------------------------------------------------+
  | Location                                                |   Total  |       Mean      |   rms   |  min |   max  |
  +----------------------------------------------------------------------------------------------------------------+
  | DAQ/ODIN                                                |      218 |       1         |         |      |        |
  | PsiDiGamma/DAQ/ODIN                                     |      218 |       1         |         |      |        |
  | PsiDiGamma/Dimuon/Phys/StdAllLooseMuons/Particles       |      436 |       2         |         |      |        |
  | PsiDiGamma/Dimuon/Rec/Vertex/Primary                    |      235 |     1.1+-0.0    | 0.3     |    1 | 3      |
  | PsiDiGamma/Phys/SelBsPsiEta/FlavourTags                 |      669 |     3.2+-0.3    | 3.6     |    1 | 31     |
  | PsiDiGamma/Phys/SelBsPsiEta/Particle2VertexRelations    |      207 |       1         |         |      |        |
  | PsiDiGamma/Phys/SelBsPsiEta/Particles                   |      669 |     3.1+-0.2    | 3.6     |    0 | 31     |
  | PsiDiGamma/Phys/SelBsPsiEta/decayVertices               |      669 |     3.2+-0.3    | 3.6     |    1 | 31     |
  | PsiDiGamma/Phys/SelBsPsiPi0/FlavourTags                 |      105 |     1.8+-0.2    | 1.6     |    1 | 11     |
  | PsiDiGamma/Phys/SelBsPsiPi0/Particle2VertexRelations    |       59 |       1         |         |      |        |
  | PsiDiGamma/Phys/SelBsPsiPi0/Particles                   |      105 |     0.6+-0.1    | 1.3     |    0 | 11     |
  | PsiDiGamma/Phys/SelBsPsiPi0/decayVertices               |      105 |     1.8+-0.2    | 1.6     |    1 | 11     |
  | PsiDiGamma/Phys/SelGoodPsi/Particles                    |      218 |       1         |         |      |        |
  | PsiDiGamma/Phys/SelGoodPsi/decayVertices                |      218 |       1         |         |      |        |
  | PsiDiGamma/Phys/StdLooseResolvedEta/Particles           |     1501 |     7.3+-0.4    | 6.2     |    3 | 48     |
  | PsiDiGamma/Phys/StdLooseResolvedPi0/Particles           |      279 |     4.7+-0.4    | 3.3     |    3 | 19     |
  | PsiDiGamma/Rec/Calo/Electrons                           |       77 |     1.1+-0.0    | 0.3     |    1 | 2      |
  | PsiDiGamma/Rec/Calo/Photons                             |     1233 |     5.7+-0.2    | 2.9     |    2 | 19     |
  | PsiDiGamma/Rec/Header                                   |      218 |       1         |         |      |        |
  | PsiDiGamma/Rec/Muon/MuonPID                             |      436 |       2         |         |      |        |
  | PsiDiGamma/Rec/ProtoP/Charged                           |      436 |       2         |         |      |        |
  | PsiDiGamma/Rec/ProtoP/Neutrals                          |      894 |     4.1+-0.2    | 2.8     |    2 | 17     |
  | PsiDiGamma/Rec/Rich/PIDs                                |      436 |       2         |         |      |        |
  | PsiDiGamma/Rec/Summary                                  |      218 |       1         |         |      |        |
  | PsiDiGamma/Rec/Track/Best                               |      436 |       2         |         |      |        |
  | PsiDiGamma/Rec/Vertex/Primary                           |      629 |     2.9+-0.1    | 1.1     |    1 | 6      |
  | Rec/Header                                              |      218 |       1         |         |      |        |
  +----------------------------------------------------------------------------------------------------------------+
    Analysed 218 events



  

! 2011-10-21 - Vanya Belyaev

 - split Fixes.py into Fixes_Gaudi.py and Fixes_LoKi.py
   to speedup the simplest GaudiPython jobs 


! ==================== Phys/Bender v18r0 2011-09-26 ===========================

! 2011-10-06 - Vanya Belyaev

 - add module MicroDST that contains backward compatible 
   configuration of "rootintes" for microDST.

   the usage is trivial:

       rootInTes = 'Event/Leptonic'

       from Bender.MicroDST import mDstConf 
 
       mDstConf ( rootInTes ) 

   Essentialy it relies on Juan's TriggerconfUtils module
   a top of it following action is performed :

    - ODIN       is copied/linked into "root-in-tes" location 
    - RawEvent   is copied/linked into "root-in-tes" location 
    - RecSummary is copied/linked into 'toot-in-tes' location 

  as a result for uDst processing no modification/tricks are required, 
  and no ugly manipulaitons with non-default argumens 
  for HASRECSUMMARY/RECSUMMARY are needed
 
  The modifications are universla and in this way 
  totally backward compatible:
  the same code applies for any stripping >= 13b 
 

  NOTE: Obviously way one should *NEVER* activate 
        the "UseTrigRawEvent" property of DaVinci configurable 

! 2011-09-29 - Vanya Belyaev

 - add simple useful script to check trigger decision for certain line:

    trg-check [options] the_line file1 [ file2[ ...]]

     >>> run(1000) 

     >>> alg.trgDecs()

     >>> run(1000)

  	  >>> alg.trgDecs() 


 "the_line" should be the full (u)DST path , e.g.:

    /Event/Leptonic/Phys/DoubleDiMuonForCharmAssociative[/Particles]

 "typical output" :

 **************************************************************
  Triggers for  chi_b2(1P)
 **************************************************************
 Hlt1_TIS chi_b2(1P)   #lines:     0 #events 6     
  (100.00+-16.67 )        TOTAL 
 Hlt1_TOS chi_b2(1P)   #lines:     5 #events 6     
  ( 66.67+-19.25 )        Hlt1DiMuonHighMassDecision 
  ( 33.33+-19.25 )        Hlt1DiMuonLowMassDecision 
  ( 16.67+-15.21 )        Hlt1SingleMuonHighPTDecision 
  ( 16.67+-15.21 )        Hlt1TrackAllL0Decision 
  ( 33.33+-19.25 )        Hlt1TrackMuonDecision 
  (100.00+-16.67 )        TOTAL 
 Hlt2_TIS chi_b2(1P)   #lines:     0 #events 6     
  (100.00+-16.67 )        TOTAL 
 Hlt2_TOS chi_b2(1P)   #lines:    10 #events 6     
  ( 66.67+-19.25 )        Hlt2DiMuonBDecision 
  ( 16.67+-15.21 )        Hlt2DiMuonDetachedDecision 
  ( 16.67+-15.21 )        Hlt2DiMuonDetachedHeavyDecision 
  ( 16.67+-15.21 )        Hlt2DiMuonDetachedJPsiDecision 
  ( 33.33+-19.25 )        Hlt2DiMuonJPsiHighPTDecision 
  ( 16.67+-15.21 )        Hlt2DiMuonPsi2SHighPTDecision 
  ( 16.67+-15.21 )        Hlt2DoubleDiMuonDecision 
  ( 50.00+-20.41 )        Hlt2ExpressJPsiDecision 
  ( 16.67+-15.21 )        Hlt2SingleMuonHighPTDecision 
  ( 16.67+-15.21 )        Hlt2SingleMuonVHighPTDecision 
  (100.00+-16.67 )        TOTAL 
 L0_TIS chi_b2(1P)   #lines:     1 #events 6     
  ( 16.67+-15.21 )        L0PhotonDecision 
  (100.00+-16.67 )        TOTAL 
 L0_TOS chi_b2(1P)   #lines:     3 #events 6     
  ( 50.00+-20.41 )        L0DiMuonDecision 
  ( 16.67+-15.21 )        L0HadronDecision 
  (100.00+-16.67 )        L0MuonDecision 
  (100.00+-16.67 )        TOTAL 
 *************************************************************

 

! ==================== Phys/Bender v18r0 2011-09-26 ===========================

! 2011-09-26 - Vanya Belyaev

	 Fixes,DstExplorer, etc.. : 
     allow the direct usage of 	LFNs form CERN Castor Gris storage

! 2011-09-13 - Vanya Belyaev

 - fix in Fixes.py
   thanks to Thomas Bauer for report 

! ==================== Phys/Bender v17r4 2011-08-05 ===========================

! 2011-08-05 - Vanya Belyaev
 - 

! ==================== Phys/Bender v17r3p3 2011-08-01 =========================

! 2011-07-31 - Vanya Belyaev

 - remove LoKiTrigger 

! 2011-07-30 - Vanya Belyaev

 - fix the default shell for scripts to /bin/sh 


! ==================== Phys/Bender v17r3p2 2011-07-28 =========================

! 2011-07-28 - Vanya Belyaev
 
 - add the experimenal module TisTos, that allows realtively ``easy'' 
   manipulaton with TisTos information. At leats it happens to be 
   very useful for all my studies...

- cmt/requirements 
    version increment to v17r3p2

! ==================== Phys/Bender v17r3p1 2011-07-28 =========================

! 2011-07-20 - Vanya Belyaev

 -  polish a bit dst-explorer for more agressive choice of db-tags :
		    
     try to use the latest tags 
     try to use Oracle if posisble 

- cmt/requirements 
    version increment to v17r3p1

! ==================== Phys/Bender v17r3 2011-07-03 ===========================

! 2011-07-03 - Vanya Belyaev

 - prepare new version, based on Davinci v28r4 
   make few steps towards IOHelper 

- cmt/requirements 
    version increment to v17r3

! ==================== Phys/Bender v17r2p1 2011-06-02 =========================

! 2011-06-202 - Vanya Belyaev
  
  - cmt/requirements 
    version increment to v17r2p1

! ==================== Phys/Bender v17r2 2011-05-23 ===========================

! 2011-05-23 - Vanya Belyaev
  
  - cmt/requirements 
    version increment to v17r2

! 2011-05-12 - Vanya Belyaev


  - DstExplorer.py :  Load Bender.MainMC for "Simulation" type

  - cmt/requirements 
    version increment to v17r1p4 
 
! ==================== Phys/Bender v17r1p3 2011-05-12 =========================

! 2011-05-12 - Vanya Belyaev

 - DataUtils.py :  update fo rnew LHCb Castor pool structure 


! ==================== Phys/Bender v17r1p2 2011-05-02 =========================

! 2011-05-02 - Vanya Belyaev

 - prepare new version, based on Davinci v28r2p2

! ==================== Phys/Bender v17r1p1 2011-04-10 =========================

! 2011-04-10 - Vanya Belyaev

 - prepare new version, based on Davinci v28r2p1 

! ==================== Phys/Bender v17r1 2011-04-02 ===========================

! 2011-04-02 - Vanya Belyaev

 - prepare new version Bender v17r0, based on DaVinci v28r2

! 2011-03-31 - Vanya Belyaev

 - tiny decoration for ls/dir methods 


! ==================== Phys/Bender v17r0p1 2011-03-01 =========================

! ==================== Phys/Bender v17r0 2011-03-01 ===========================

! 2011-03-01 - Vanya Belyaev

 - prepare new version Bender v17r0, based on DaVinci v28r0 


! ==================== Phys/Bender v16r1 2011-02-05 ===========================

! 2011-02-05 - Vanya Belyaev

 - prepare new version Bender v16r1, based on DaVinci v27r1 


! ==================== Phys/Bender v16r0 2011-01-27 ===========================

! 2011-01-27 - Vanya Belyaev

 - prepare new version Bender v16r0

! ==================== Phys/Bender v15r4 2011-01-16 ===========================

! 2011-01-16 - Vanya Belyaev

 - prepare new version Bender v15r4 

! ==================== Phys/Bender v15r3 2010-11-23 ===========================

! 2010-11-23 - Vanya Belyaev

 - prepare new version for new Davinci 

! ==================== Phys/Bender v15r2 2010-11-15 ===========================

! 2010-11-15 - Vanya Belyaev
 
 - polish seek* functions 

 - imporove dst-explorer 

 - prepare for new release v15r2 

 - cmt/requiremements 

     version increment to v15r2 
    
! 2010-11-06 - Vanya Belyaev

 - add function 
       seekForData 


! ==================== Phys/Bender v15r1p1 2010-10-12 =========================

! 2010-10-12 - Vanya Belyaev
 - prepare v15r1p1 

! 2010-10-11 - Vanya Belyaev

 - fix the problem with the aliases on windows platform

! ==================== Phys/Bender v15r1 2010-10-10 ===========================

! 2010-10-10 - Vanya Belyaev
 
- prepare v15r1 
 
! 2010-10-03 - Vanya Belyaev

 - polish a bit dst-explorer 

! 2010-09-19 - Vanya Belyaev
 - fix the filenames in DataUtils 


! 2010-09-17 - Vanya Belyaev

 - few fixes for DST-explorer 
 - fix the filenames in DataUtils 
 - bug fix in disableAllAlgs 

 - cmt/requirements 

     version increment to v15r1 


! ==================== Phys/Bender v15r0 2010-09-13 ===========================

! 2010-09-10 - Vanya Belyaev

 - prepare for Bender v15r0 

 - python/Bender/DstExplorer.py 
 
     trivial script to expore any DST. 

 - scripts/dst_explorer 

     the script to run DstExplorer

 The usage is fairly trivial:

# dst_explorer [options] file1 [ file2 [ file3 [ file4 ....'
#
#     >>> ls('/Event')
#
#     >>> ls('/Event/MicroDST')
#
#     >>> ls('/Event/MicroDST/Dimuon')
#
#     >>> ls('/Event/MicroDST/Dimuon/Phys')
#
#     >>> ls('/Event/MicroDST/Dimuon/Phys/SelBs2KKMUMU')
#
#     >>> bs = get('/Event/MicroDST/Dimuon/Phys/SelBs2KKMUMU/Particles')
#
#     >>> for b in bs : print b.decay()
#
#     >>> run(1)
#
#     >>> ls('/Event') 

Note-1: the files could be files on castor
Note-2: it is not tested on Windows platform yet 

! ==================== Phys/Bender v14r5p1 2010-08-28 =========================

! 2010-08-28 - Vanya Belyaev
 - prepare v14r5p1 

! ==================== Phys/Bender v14r5 2010-08-26 ===========================

! 2010-08-26 - Vanya Belyaev
 - prepare v14r5 

! ==================== Phys/Bender v14r4p1 2010-08-07 =======================


! 2010-08-07 - Vanya Belyaev

 - new version, based on DaVinci v25r7p1

! ==================== Phys/Bender v14r4 2010-08-03 =========================

! 2010-08-03 - Vanya Belyaev

 - new version, based on DaVinci v25r7


! ==================== Phys/Bender v14r3 2010-07-08 =========================

! 2010-07-13 - Vanya Belyaev

 - new version, based on DaVinci v25r6

   the major changes:

   - now the decay finder can be applied implicitly:

        mu = self.mcselect ('mu' , 'J/psi(1S) => ^mu+ ^mu-' ) 

        D  = self.select   ( 'D' , ' [D+ => K- pi+ pi+]CC' ) 

  - now one can deal with DecayTreeFitter and DTF_*-functors 

    see http://indico.cern.ch/materialDisplay.py?contribId=16&sessionId=8&materialId=slides&confId=73578
 
- cmt/requirements 

   version increment to v14r3 


! ==================== Phys/Bender v14r2p1 2010-07-08 =========================

! 2010-07-08 - Vanya Belyaev
 	 
 - prepare new verison, based on DaVinci v25r5p2 

! ==================== Phys/Bender v14r2 2010-05-31 ===========================

! 2010-05-31 - Vanya Belyaev
 	 
 - prepare new verison, based on DaVinci v25r5 

! ==================== Phys/Bender v14r1p2 2010-05-26 =========================

! 2010-05-26 - Vanya Belyaev

 - prepare new verison, based on DaVinci v25r4p3 

! ==================== Phys/Bender v14r1p1 2010-05-14 =========================

! ==================== Phys/Bender v14r1 2010-05-04 ===========================

! 2010-05-04 - Vanya Belyaev

 - few fixed for LoKi::Range<-->Gaudi::Range problem

! ==================== Phys/Bender v14r0p3 2010-04-23 =========================

! 2010-04-23 - Vanya Belyaev

	use new version of DaVinci v25r2p3 

 

! ==================== Phys/Bender v14r0p2 2010-03-25 =========================

	use new version of DaVinci v25r2p1 

! ==================== Phys/Bender v14r0p1 2010-03-18 =========================

	use new version of DaVinci v25r2 

! ==================== Phys/Bender v14r0   2010-03-14 =========================

! 2010-03-14 - Vanya Belyaev

 - major update of all related functionality.

     the goal: to prepare "Grid-friendly" verison of Bender
 
! 2010-02-12 - Vanya Belyaev

 - Bender.Main.py 

    update a bit the setData method 

 - cmt/requirements 

     version incrment to v14r0 

! ==================== Phys/Bender v13r0 2010-02-10 ===========================

- prepare for new version, identical to v12r* but with fixed/updated examples  

! ==================== Phys/Bender v12r7p1 2010-01-12 =========================

- prepare for new version, identical to v12r7 but with fixed/updated examples  

! ==================== Phys/Bender v12r7   2009-12-18 =========================

- prepare for bnew version (DaVinci v24r7 based) 

! ==================== Phys/Bender v12r6   2009-12-07 =========================

- prepare for bnew version (DaVinci v24r6 based) 

! ==================== Phys/Bender v12r5p2 2009-12-01 =========================


! ==================== Phys/Bender v12r5p1 2009-11-26 =========================

! 2009-11-26 - Vanya Belyaev

 - Bender.Fixes

      add decoration for iEventSelector to open properly CASTOR & RAW/MDG files

 - cmt/requirements

      version increment to v12r5p1 


! ==================== Phys/Bender v12r5 2009-11-24 ===========================

! 2009-11-24 - Vanya Belyaev

 - rebuild with DaVinci v24r5p1 


! ==================== Phys/Bender v12r4 2009-11-16 ===========================

! 2009-11-16 - Vanya Belyaev

 - fixes for new Gaudi/DaVinci/Bender 


! ==================== Phys/Bender v12r3 2009-09-13 ===========================

 - prepare new verison, based on DaVinci v24r2p1  
   it is identical to v12r2 

! ==================== Phys/Bender v12r2 2009-07-30 ===========================

! 2009-07-30 - Vanya BELYAEV

 - prepare new verison, based on DaVinci v24r0 
   it is identical to v12r1 


! ==================== Phys/Bender v12r1 2009-06-14 ===========================

! 2009-06-14 - Vanya Belyaev

 - python/Bender/Startup.py

      suppress the proliferation of empty history files.

 - cmt/requirements 

      version increment to v12r1 

! ==================== Phys/Bender v12r0 2009-05-14 ===========================

! 2009-05-14 - Vanya BELYAEV

 - new version built atop of DaVinci v23r0p1 


! ==================== Phys/Bender v11r0 2009-03-04 ===========================

! 2009-03-04 - Vanya BELYAEV
 
 - new version build a top of DaVinci v22r1

! ==================== Phys/Bender v10r0 2008-12-08 ===========================

! 2008-12-05 - Vanya BELYAEV

 - new version build a top of DaVinci v21r0
  

! ==================== Phys/Bender v9r1 2008-10-09 ============================

! 2008-10-09 - Vanya BELYAEV
 

! ==================== Phys/Bender v9r0 2008-09-16 ============================

! 2008-09-16 - Vanya BELYAEV

 - new version build a top of Davinci v20r2 

   It also contains some temporary fixes (to be removen in the future)
  
   python/Bender/Fixes.py 
    
    New module - the placeholder where the fixed should be placed 

! ==================== Phys/Bender v8r3p1 2008-07-15 ==========================

! 2008-07-15 - Vanya BELYAEV
 - New version (identical to v8r3) but based on DaVinci v19r14 

! ==================== Phys/Bender v8r3 2008-06-12 ============================

! 2008-06-12 - Vanya BELYAEV

 - new version based on DaVinci v19r13 

   This is the first version of Bender, which is "Configurables-aware" 
   (many thanks to Jan Aamoral for stimulating questions and solutions)

   Now few important clashes with Configurables are removed and Configurables 
   *could* be used with Bender. Importans sequence for end-uses:

   The module Bender.Main does *NOT* contain anymore the symbol "gaudi" 
   (the instance of AppMgr). This symbol needs to be created explicitly 
   in user script/module *AFTER* all explicit manipulations with Configurables.

   *IMPORTANT*: 
     All actions with Configurables are defined *ONLY BEFORE* the 
     instantiation of Application Manager.

   
   Typical and Recommended structure of Bender module is :

 
## import everything from some Bender-module

from Bender.Main import *

## define the class (algorithm)

class MyAlg( Algo ) : ...


## the configuration part of the module:

def configure() :

      ## deal with configurables:

      ## 1) import the external configuration
      importOptions ( file1 )
      ...
      importOptions ( fileN )

      ## 2) import some important configurables
      form Gaudi.Configuration import NTupleSvc, HistogramPessistencySvc

      ## 3) use configurables 
      NTupleSvc ( Output = [ " MYLUN DATAFILE='MyTuples.root' OPT='NEW' TYP='ROOT'" ] )
      HistogramPersistencySvc ( OutputFile = "MyHistos.root" ) 
 
      ## instantiate the Application manager
      gaudi = appMgr()

      ## create & configure own algorithm
      alg = MyAlg( ... )
      alg.Property1 = ...
      alg.Property2 = ...
      alg.NTupleLUN = "MYLUN"

      ## add algorithm to the list of top-level algorithms
      gaudi.addAlgorithm( alg )
  
      ...


## job steering

if '__main__' == __name__ :

        ## configure the job
        configure()

        ## run the job
        run ( 100 )
 

Please note the order in which the manipulation with Configurables and 
instantiation of Application Manager is performed. Also note that Bender.Main 
now defined the function "run", which allows to about the explicit 
import of symbol "gaudi".

 

! ==================== Phys/Bender v8r2 2008-04-30 ============================

! 2008-04-30 - Vanya BELYAEV
 - prepare the version based on DaVinci v19r12 


! ==================== Phys/Bender v8r1 2008-03-15 ============================

! 2008-03-15 - Vanya BELYAEV

 - prepare the version, based on DaVinci v19r11
   simplify the structure of environment variables 
   use the standard patterns


! ==================== Phys/Bender v8r0 2007-09-29 ============================

 2007-09-29 - Vanya BELYAEV

 - New *ONLY PYTHON* version, compatible with DC06 data 
 

! 2007-08-20 - Vanya Belyaev

 - prepare for bew version v8r0 
   only python, new LoKi


! 2007-08-17 - Vanya Belyaev
 - remove all C++, keep only python 
 - reshuffle modules to create "package"

! ==================== Phys/Bender v7r0 2007-03-22 ===========================

! 2007-03-22 - Vanya BELYAEV
 - prepare for Bender v7r0 
 - cmt/requirements
   version increment to v7r0 

! ==================== Phys/Bender v6r2 2007-01-16 ===========================

! 2007-01-16 - Vanya BELYAEV

   python/benderpcuts.py
    add new symbols DIRA and DANG - 
    shortcuts for LoKi::Particles::CosineDirectionAngle 

   - version for DaVinci v17r8
   - tiny fix for SLC4 platform 


! ==================== Phys/Bender v6r1 2006-12-14 ===========================

! 2006-12-14 - Vanya Belyaev 
 - version for DaVinci v17r6/LoKi v6r1 


! 2006-11-28 - Vanya BELYAEV
 - improve doxygen documentation
 - cmt/requirments 
   version increment to v6r1 

! ==================== Phys/Bender v6r0 2006-11-19 ===========================

! 2006-11-09 - Vanya BELYAEV

 - test version for Bender v6r0 


! 2006-10-11 - Vanya Belyaev

   ==  PREPARE Bender v6r0  ===

 - remove a lot of obsolet estuff
 - put new very slim stuff
 - nothing is working (yet) 

   cmt/requirements 
     version incrmeent to v6r0 
 
  

! 2005-07-06 - Vanya BELYAEV
 - python/benderclhep.py 
   new module to get shorter names for HepGeom::Point3D<double> 

 - python/bendermodule.py
   import new module benderclhep 

 - python/benderstr.py
   resurrect a 'smart' printout for *ChannelID classes 

 - cmt/requirements
   version incrmeent to v5r2 


! 2005-06-14 - Vanya BELYAEV
 - add new features for Trg* stuff 
 - cmt/requirements 
   version increment 

! 2005-02-10 - Vanya BELYAEV
 -  add new module bendrmatrix.py
    to make available CLHEP Matrix indexing through overload of __call__ method.

    Important! indices starts from 1 similar to 
     double GepGenMatrix::operator() ( int row , int col ) 

! 2005-02-10 - Vanya BELYAEV
 - remove extra prints 

! 2005-02-08 - Vanya BELYAEV
 - python/bendersmartrefs.py 
	 fix a bug 
 - python/benderstartup.py 
   new file, prototype for "startup" script 
 - python/bendermodule.py 
   execute startup script 
 
! 2005-02-05 - Vanya BELYAEV
 - python/benderhelper.py
   bug fix for MC predicates


! 2005-02-05 - Vanya BELYAEV
 - add new package Tools/BenderResl to make available
   all C++ relation tables in Python/Bender
   see the example in Ex/BenderExample/v4r6/python/CaloCLusterMCTruth.py
   For a moment an explicit import of this package si required:

   import benderrels

   After some consolidation period, it will be imported in an automated way


! 2005-02-02 - Vanya BELYAEV
 - python/benderaux.py
   make the functions from namespace LoKi::Adder availabel in Bendr/Python
   as "addMomenta" ( throughtehintrmediate class Bender::Adder)
 - python
   load new classes LoKi::MCParticcles::MCMotherFunction and
   LoKi::MCMotherPredicate availabel as MCMOTHER and MCMOTHCUT
 - cmt/requirements
   version incremenet to v4r6

! 2005-01-21 - Vanya BELYAEV

 - python/bendersmartrefs.py

   new script to substitute the retur value for few C++ methodf
   from SmartRefVector<XXX> to Python list
   e.g.  MCParticle::endVertices()
   It allows a normal iteration over the return value

   mcp = ....
   for v in mcp.endVertices() :
        type type(v), v


   In additon SmartRefVector<XXX> is equipper with 'normal'
   __getitem__ function to provide similar iteration

 - cmt/requirements
   move LD_PRELOAD to BenderGCC package

 - cmt/requirements
   version increment to v4r5


! 2004-08-08 - Vanya BELYAEV
 - python/benderhelper.py
   add ==/!= operators to ID/ABSID/MCID/MCABSID functions. e.g.
     'e+' == MCABSID
 - cmt/requirements
   version increment to v3r7


! 2004-07-11 - Vanya BELYAEV
 - python/*.py
   split bendermodule.py into set of small modules.
- cmt/requirements
   add the usage of Tools/LoKiHybrid package
   increment the versiuon to v3r5

! 2004-03-26 - Vanya BELYAEV
 - python/bendermodule.py
   uncomment TR* functions
 - cmt/requirements
   increment the version to v3r1

! 2004-03-17 - Vanya BELYAEV
 - python/benderPreLoad.py
   new module with 3 simple functions which will simplify teh configuration of
   preloading algorihtms of type LoKiPreLoad,
   see the examples in BenderExample package


! 2003-04-15 - Vanya BELYAEV
 - the second commit into CVS :-)
	too many changes to be described here, consider it 'the first commit'

! 2002-11-02 - Vanya Belyaev
 - new package

! -----------------------------------------------------------------------------
! The END
! -----------------------------------------------------------------------------

</PRE>

