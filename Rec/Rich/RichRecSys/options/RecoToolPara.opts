
// Rich Reconstruction tools
//===================================================================================================

// Track creator
ToolSvc.RichToolRegistry.Tools += { "RichTrackCreatorFromTrStoredTracks/RichTrackCreator" };
//                                                Forward  Match  Follow    Seed  VTT   KsTrack  Velo
ToolSvc.RichTrackCreator.TrackMinPtotPerClass = { 0,       0,     0,        0,    1.0,  0.0,     999 };
ToolSvc.RichTrackCreator.BuildMassHypothesisRings = false;

// RichRecRing creator for mass hypothesis rings
ToolSvc.RichToolRegistry.Tools += { "RichRecRingCreator/RichMassHypothesisRingCreator" };

// Segment creator
ToolSvc.RichToolRegistry.Tools += { "RichSegmentCreator/RichSegmentCreator" };
//                                             Aerogel  C4F10   CF4
ToolSvc.RichSegmentCreator.EnergyBins      = { 10,      10,     10   };

// Status Creator
ToolSvc.RichToolRegistry.Tools += { "RichStatusCreator/RichStatusCreator" };

// Pixel creator
ToolSvc.RichToolRegistry.Tools += { "RichPixelCreatorFromRichDigits/RichPixelCreator" };

// Photon Creator
ToolSvc.RichToolRegistry.Tools += { "RichPhotonCreator/RichPhotonCreator",
                                    "RichPhotonPredictor/RichPhotonPredictor" };
ToolSvc.RichPhotonPredictor.MinTrackROI          = { 130.0,   0.0,    0.0  };
ToolSvc.RichPhotonPredictor.MaxTrackROI          = { 350.0,  90.0,  250.0  };
ToolSvc.RichPhotonCreator.MinCherenkovTheta      = { 0.1,   0.005,  0.005  };
ToolSvc.RichPhotonCreator.MaxCherenkovTheta      = { 0.29,  0.075,  0.045  };
ToolSvc.RichPhotonCreator.MinPhotonProbability   = { 1e-15,  1e-15,  1e-15 };

// Geometrical efficiency from full ray tracing
ToolSvc.RichToolRegistry.Tools += { "RichGeomEffPhotonTracing/RichGeomEff" };
ToolSvc.RichGeomEff.NPhotonsGeomEffCalc          = 100;
ToolSvc.RichGeomEff.NPhotonsGeomEffBailout       = 25;

// Fixed value
//ToolSvc.RichToolRegistry.Tools += { "RichGeomEffFixedValue/RichGeomEff" };
//ToolSvc.RichGeomEff.FixedSignalEfficiency   =  { 0.75, 0.75, 0.75 };
//ToolSvc.RichGeomEff.FixedScatterEfficiency  =  0.75;

// Track signals
ToolSvc.RichToolRegistry.Tools += { "RichExpectedTrackSignal/RichExpectedTrackSignal" };

// Photon signals
ToolSvc.RichToolRegistry.Tools += { "RichPhotonSignal/RichPhotonSignal" };

// Sellmeir function
ToolSvc.RichToolRegistry.Tools += { "RichSellmeirFunc/RichSellmeirFunc" };
ToolSvc.RichSellmeirFunc.WaveIndpTrans = 1.0;
//ToolSvc.RichSellmeirFunc.WaveIndpTrans = 0.9368;

// Cherenkov resolution - fixed binned implementation as a function of cherenkov angle
#include "$RICHRECSYSOPTS/tools/BinnedCherenkovResVtheta.opts"

// Interpolated cherenkov resolution function of the cherenkov angle
//#include "$RICHRECSYSOPTS/tools/InterpCherenkovResVtheta.opts"

// Interpolated cherenkov resolution function of momentum
//#include "$RICHRECSYSOPTS/tools/InterpCherenkovResVmomentum.opts"

// analytical cherenkov resolution as a function of momentum
//#include "$RICHRECSYSOPTS/tools/FunctionalCherenkovResVmomentum.opts"

// Photon detection efficiency using XML tabulation
ToolSvc.RichToolRegistry.Tools += { "RichTabulatedSignalDetectionEff/RichSignalDetectionEff" };
//ToolSvc.RichSignalDetectionEff.RichSphMirrorLocations = {
//  "/dd/Geometry/Rich1/Rich1SurfaceTabProperties/Rich1Mirror1SurfaceReflectivityPT",
//  "/dd/Geometry/Rich2/Rich2SurfaceTabProperties/Rich2Mirror1SurfaceReflectivityPT"
//};
//ToolSvc.RichSignalDetectionEff.RichFlatMirrorLocations = {
//  "/dd/Geometry/Rich1/Rich1SurfaceTabProperties/Rich1Mirror2SurfaceReflectivityPT",
//  "/dd/Geometry/Rich2/Rich2SurfaceTabProperties/Rich2Mirror2SurfaceReflectivityPT"
//};
ToolSvc.RichSignalDetectionEff.RichSphMirrorLocations = {
  "/dd/Geometry/Rich1/Rich1SurfaceTabProperties/Rich1Mirror1SurfaceIdealReflectivityPT",
  "/dd/Geometry/Rich2/Rich2SurfaceTabProperties/Rich2Mirror1SurfaceIdealReflectivityPT"
};
ToolSvc.RichSignalDetectionEff.RichFlatMirrorLocations = {
  "/dd/Geometry/Rich1/Rich1SurfaceTabProperties/Rich1Mirror2SurfaceIdealReflectivityPT",
  "/dd/Geometry/Rich2/Rich2SurfaceTabProperties/Rich2Mirror2SurfaceIdealReflectivityPT"
};
ToolSvc.RichSignalDetectionEff.QETableLocation =
  "/dd/Materials/RichMaterialTabProperties/HpdQuantumEff";

// Refractive index using XML tabulation
ToolSvc.RichToolRegistry.Tools += { "RichTabulatedRefractiveIndex/RichRefractiveIndex" };
//ToolSvc.RichRefractiveIndex.RefIndexLocations = {
//  "/dd/Materials/RichMaterialTabProperties/AerogelRIndexPT",
//  "/dd/Materials/RichMaterialTabProperties/C4F10SellParamRIndexPT",
//  "/dd/Materials/RichMaterialTabProperties/CF4RIndexPT"
//};
//ToolSvc.RichRefractiveIndex.RefIndexLocations = {
//  "/dd/Materials/RichMaterialTabProperties/AerogelIdealRIndexPT",
//  "/dd/Materials/RichMaterialTabProperties/C4F10SellParamRIndexPT",
//  "/dd/Materials/RichMaterialTabProperties/CF4RIndexPT"
//};
ToolSvc.RichRefractiveIndex.RefIndexLocations = {
  "/dd/Materials/RichMaterialTabProperties/AerogelIdealCkvRIndexFilterPT",
  "/dd/Materials/RichMaterialTabProperties/C4F10SellParamRIndexPT",
  "/dd/Materials/RichMaterialTabProperties/CF4RIndexPT"
};
ToolSvc.RichRefractiveIndex.QETableLocation =
  "/dd/Materials/RichMaterialTabProperties/HpdQuantumEff";

// Rayleigh scattering using XML tabulation
ToolSvc.RichToolRegistry.Tools += { "RichTabulatedRayleighScatter/RichRayleighScatter" };
ToolSvc.RichRayleighScatter.RayScatLengthLocation =
  "/dd/Materials/RichMaterialTabProperties/AerogelRayleighPT";

// Rayleigh scattering using analytic function
//ToolSvc.RichToolRegistry.Tools += { "RichFunctionalRayleighScatter/RichRayleighScatter" };

// Expected Cherenkov angles
ToolSvc.RichToolRegistry.Tools += { "RichCherenkovAngle/RichCherenkovAngle" };

// Rich particle properties
ToolSvc.RichToolRegistry.Tools += { "RichParticleProperties/RichParticleProperties" };

// Gas Quartz window transmission
ToolSvc.RichToolRegistry.Tools += { "RichTabulatedGasQuartzWindowAbs/RichGasQuartzWindow" };
ToolSvc.RichGasQuartzWindow.GasQuartzWindowLocation =
  "/dd/Materials/RichMaterialTabProperties/GasWindowQuartzIdealAbsLengthPT";
//ToolSvc.RichGasQuartzWindow.GasQuartzWindowLocation =
//  "/dd/Materials/RichMaterialTabProperties/GasWindowQuartzAbsLengthPT";

// Rich Detector tools
//=================================================================================

// Detector Paramters
ToolSvc.RichToolRegistry.Tools += { "RichDetParameters/RichDetParameters" };
//                                            Aerogel  C4F10   CF4
ToolSvc.RichDetParameters.MinPhotonEnergy = { 1.75,    1.75,   1.75 };
ToolSvc.RichDetParameters.MaxPhotonEnergy = { 3.75,    7.00,   7.00 };

// SmartIDs
ToolSvc.RichToolRegistry.Tools += { "RichSmartIDTool/RichSmartIDTool" };

// Ray tracing
ToolSvc.RichToolRegistry.Tools += { "CdfRayTracing/RichRayTracing" };
//ToolSvc.RichToolRegistry.Tools += { "RichRayTracing/RichRayTracing" };

// Rich segment maker. Uses implicit linear extrapolation
//ToolSvc.RichToolRegistry.Tools += { "CdfRichTrSegMakerFromTrStoredTracks/RichDetTrSegMaker" };
// Rich segment maker. Uses track extrapolation tools
ToolSvc.RichToolRegistry.Tools += { "RichTrSegMakerFromTrStoredTracks/RichDetTrSegMaker" };
ToolSvc.RichDetTrSegMaker.PrimaryTrackExtrapolator = "TrHerabExtrapolator";
//ToolSvc.RichDetTrSegMaker.PrimaryTrackExtrapolator = "TrParabolicExtrapolator";
ToolSvc.RichDetTrSegMaker.BackupTrackExtrapolator  = "TrParabolicExtrapolator";
//ToolSvc.RichDetTrSegMaker.BackupTrackExtrapolator  = "TrLinearExtrapolator";

// photon reconstruction
ToolSvc.RichToolRegistry.Tools += { "CdfPhotonReco/RichDetPhotonReco" };
//ToolSvc.RichToolRegistry.Tools += { "RichPhotonReco/RichDetPhotonReco" };


