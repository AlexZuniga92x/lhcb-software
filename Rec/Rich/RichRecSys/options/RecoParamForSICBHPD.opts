// RICH Reconstruction Tool parameters
// Optimised for SICB HPD

// Track creator
ToolSvc.RichToolRegistry.Tools += { "RichTrackCreatorFromTrStoredTracks/RichTrackCreator" };

// Segment creator
ToolSvc.RichToolRegistry.Tools += { "RichSegmentCreator/RichSegmentCreator" };
ToolSvc.RichSegmentCreator.MinPhotonEnergy = { 1.75, 1.75, 1.75 };
ToolSvc.RichSegmentCreator.MaxPhotonEnergy = { 3.8,  7.00, 7.00 };
ToolSvc.RichSegmentCreator.EnergyBins      = { 10,   10,   10   };

// Status Creator
ToolSvc.RichToolRegistry.Tools += { "RichStatusCreator/RichStatusCreator" };

// Pixel creator
ToolSvc.RichToolRegistry.Tools += { "RichPixelCreatorFromSICBHPD/RichPixelCreator" };

// Detector interface 
ToolSvc.RichToolRegistry.Tools += { "RichDetInterface/RichDetInterface" };

// SICB geometry (temporary)
ToolSvc.RichToolRegistry.Tools += { "PixelFinder/SICBPixelGeom" };

// Photon Creator
ToolSvc.RichToolRegistry.Tools += { "RichPhotonCreator/RichPhotonCreator",
                                    "RichPhotonPredictor/RichPhotonPredictor" };
ToolSvc.RichPhotonPredictor.MinTrackROI          = { 130.0,  0.0,   0.0  };
ToolSvc.RichPhotonPredictor.MaxTrackROI          = { 350.0, 90.0, 250.0  };
ToolSvc.RichPhotonCreator.MinCherenkovTheta      = { 0.1,  0.005, 0.005  };
ToolSvc.RichPhotonCreator.MaxCherenkovTheta      = { 0.29, 0.075, 0.045  };
ToolSvc.RichPhotonCreator.MinPhotonProbability   = { 1e-15, 1e-15, 1e-15 };

// Full Geometrical efficiency
ToolSvc.RichToolRegistry.Tools += { "RichGeomEffDetailed/RichGeomEff" };
ToolSvc.RichGeomEff.NPhotonsGeomEffCalc          = 100;
ToolSvc.RichGeomEff.NPhotonsGeomEffBailout       = 25;

// Fast geometrical efficiency
//ToolSvc.RichToolRegistry.Tools += { "RichGeomEffFixedValue/RichGeomEff" };
//RichGeomEff.FixedSignalEfficiency = 0.6;
//RichGeomEff.FixedScatterEfficiency = 0.6;

// Track signals
ToolSvc.RichToolRegistry.Tools += { "RichExpectedTrackSignal/RichExpectedTrackSignal" };

// Photon signals - For HPDs
ToolSvc.RichToolRegistry.Tools += { "RichPhotonSignalHPD/RichPhotonSignal" };

// Sellmeir function
ToolSvc.RichToolRegistry.Tools += { "RichSellmeirFunc/RichSellmeirFunc" };

// Sellmeir function with SICB parameters hardcoded (temporary)
//ToolSvc.RichToolRegistry.Tools += { "RichSellmeirFuncSICB/RichSellmeirFunc" };

// Cherenkov resolution - fixed binned implementation
#include "$RICHRECSYSOPTS/tools/BinnedCherenkovRes.opts"

// Interpolated cherenkov resolution function
//#include "$RICHRECSYSOPTS/tools/InterpCherenkovRes.opts"

//ToolSvc.RichToolRegistry.Tools += { "RichSignalDetectionEffSICB/RichSignalDetectionEff" };
//ToolSvc.RichSignalDetectionEff.QETableLocation =
//  "/dd/Materials/RichMaterialTabProperties/HpdQuantumEff";

// Photon detection efficiency using XML tabulation
ToolSvc.RichToolRegistry.Tools += { "RichTabulatedHPDSignalDetectionEffSICB/RichSignalDetectionEff" };
ToolSvc.RichSignalDetectionEff.RichSphMirrorLocations = {
  "/dd/Geometry/Rich1/Rich1SurfaceTabProperties/Rich1Mirror1SurfaceIdealReflectivityPT",
  "/dd/Geometry/Rich2/Rich2SurfaceTabProperties/Rich2Mirror1SurfaceIdealReflectivityPT"
};
ToolSvc.RichSignalDetectionEff.RichFlatMirrorLocations = {
  "/dd/Geometry/Rich1/Rich1SurfaceTabProperties/Rich1Mirror2SurfaceIdealReflectivityPT",
  "/dd/Geometry/Rich2/Rich2SurfaceTabProperties/Rich2Mirror2SurfaceIdealReflectivityPT"
};
ToolSvc.RichSignalDetectionEff.QETableLocation =
  "/dd/Materials/RichMaterialTabProperties/HpdQuantumEff";

// Refractive index using SICB hardcodings (temporary)
//ToolSvc.RichToolRegistry.Tools += { "RichRefractiveIndexSICB/RichRefractiveIndex" };
//ToolSvc.RichRefractiveIndex.QETableLocation =
//  "/dd/Materials/RichMaterialTabProperties/HpdQuantumEff";

// Refractive index using XML tabulation
ToolSvc.RichToolRegistry.Tools += { "RichTabulatedRefractiveIndex/RichRefractiveIndex" };
ToolSvc.RichRefractiveIndex.RefIndexLocations = {
  "/dd/Materials/RichMaterialTabProperties/AerogelIdealRIndexPT",
  "/dd/Materials/RichMaterialTabProperties/C4F10SellParamRIndexPT",
  "/dd/Materials/RichMaterialTabProperties/CF4RIndexPT"
};
ToolSvc.RichRefractiveIndex.QETableLocation =
  "/dd/Materials/RichMaterialTabProperties/HpdQuantumEff";

// Rayleigh scattering using XML tabulation
//ToolSvc.RichToolRegistry.Tools += { "RichTabulatedRayleighScatter/RichRayleighScatter" };
//ToolSvc.RichRayleighScatter.RayScatLengthLocation = 
//    "/dd/Materials/RichMaterialTabProperties/AerogelRayleighPT";

// Rayleigh scattering using analytic function
ToolSvc.RichToolRegistry.Tools += { "RichFunctionalRayleighScatter/RichRayleighScatter" };

// Expected Cherenkov angles
ToolSvc.RichToolRegistry.Tools += { "RichCherenkovAngle/RichCherenkovAngle" };

// Rich particle properties
ToolSvc.RichToolRegistry.Tools += { "RichParticleProperties/RichParticleProperties" };

// temporary parameters
//ToolSvc.RichSellmeirFunc.WaveIndpTrans = 1;
//ToolSvc.RichRayleighScatter.AeroClarity = 0.0008;
