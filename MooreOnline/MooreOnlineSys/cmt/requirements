package MooreOnlineSys
version           v20r3p3
branches doc cmt

#=======================================================
# Don't forget the applications
#=======================================================

use  MooreScripts  v1r0

# Bug fixes on top of LHCb v36r1 release stack


# Declare this as a container package
apply_pattern container_package

# Allow the generation of QMTests
apply_pattern QMTest

# Allow the generation of QMTest summary
apply_pattern QMTestSummarize

macro_remove cmt_actions_constituents 'runMakeOptions'
macro_remove cmt_actions_constituents 'WriteOptions'

private
# create files needed by online setup -- by default we use
# the SetupMoore file generated by installing the software,
# but if ONLINE_MOORE is set we overrule this...
macro Create_SetupMoore_output  "$(CMTINSTALLAREA)/scripts/setupMoore_$(version).sh"
macro Create_SetupMoore_command "python ../scripts/CreateSetupMooreOnline.py $(Create_SetupMoore_output) $(version) " \
apply_pattern CallCommand  target=Create_SetupMoore

macro Create_RunMooreOnline_output  "$(CMTINSTALLAREA)/scripts/runMooreOnline_EFF.sh"
macro Create_RunMooreOnline_command "python ../scripts/CreateRunMooreOnline_EFF.py $(Create_RunMooreOnline_output) $(Create_SetupMoore_output) "
apply_pattern CallCommand  target=Create_RunMooreOnline

macro Create_RunMooreHlt1Online_output  "$(CMTINSTALLAREA)/scripts/runMooreHlt1Online_EFF.sh"
macro Create_RunMooreHlt1Online_command "python ../scripts/CreateRunMooreOnline_EFF.py $(Create_RunMooreHlt1Online_output) $(Create_SetupMoore_output) Hlt1"
apply_pattern CallCommand  target=Create_RunMooreHlt1Online

macro Create_RunMooreHlt2Online_output  "$(CMTINSTALLAREA)/scripts/runMooreHlt2Online_EFF.sh"
macro Create_RunMooreHlt2Online_command "python ../scripts/CreateRunMooreOnline_EFF.py $(Create_RunMooreHlt2Online_output) $(Create_SetupMoore_output) Hlt2"
apply_pattern CallCommand  target=Create_RunMooreHlt2Online

# copy the TCK manifest for the _current_ release to the install area...
macro Install_TCK_Manifest_output  "$(CMTINSTALLAREA)/TCK/manifest"
macro Install_TCK_Manifest_command "python ../scripts/install_TCK_manifest.py $(HLTTCKROOT)/manifest/MOORE_$(version) $(Install_TCK_Manifest_output)"
apply_pattern CallCommand  target=Install_TCK_Manifest

macro_remove cmt_actions_constituents 'runMakeOptions'
macro_remove cmt_actions_constituents 'WriteOptions'

end_private
