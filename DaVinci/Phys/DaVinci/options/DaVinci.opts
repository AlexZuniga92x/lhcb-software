//##############################################################
// Default DaVinci job Options
//
// This file defines, sequences and configures the algorithms 
// to be executed
//==============================================================
// Standard Gaudi configuration and additional DLLs are in 
// DaVinciCommon.opts
//--------------------------------------------------------------
#include "$DAVINCIROOT/options/DaVinciCommon.opts"
#include "$DAVINCIROOT/options/DaVinciv248r2.opts"

//--------------------------------------------------------------
// Histogram persistency 
// Hbook or Root are available, uncomment the one you want to use
// Keep in mind that the hbook file referred to here contains 
// all the C++ generated histograms, not those filled in Fortran
//--------------------------------------------------------------
#include "$STDOPTS/Hbook.opts"
HistogramPersistencySvc.OutputFile = "Histos.hbook";
//#include "$STDOPTS/RootHist.opts"
//HistogramPersistencySvc.OutputFile = "Histos.rt";

//--------------------------------------------------------------
// Ntuples available by default. Comment to switch off
//--------------------------------------------------------------
ApplicationMgr.ExtSvc += { "NTupleSvc" };
NTupleSvc.Output={"FILE1 DATAFILE='Ntuples.hbook' TYP='HBOOK' OPT='NEW'"};
//NTupleSvc.Output={"FILE1 DATAFILE='Ntuples.rt' TYP='ROOT' OPT='NEW'"};

//--------------------------------------------------------------
// DaVinci Algorithms
//--------------------------------------------------------------
// Redo L0 trigger decision (for data produced with Brunel v13r1) 
#include "$DAVINCIROOT/options/L0.opts"
// Recalibration for gammas (for data produced with Brunel v13r1)
//  #include "$DAVINCIROOT/options/CaloReCalibration.opts";

// Perfect ParticleID (switch off ChargedProtoPAlg when switching this on)
//  ApplicationMgr.TopAlg = { "MCPIDProtoPAlg" };

// Charged ProtoParticles
ApplicationMgr.TopAlg = { "ChargedProtoPAlg" };

// Neutral ProtoParticles
//  ApplicationMgr.TopAlg += { "NeutralPPCreator/NeutralProtoPAlg" };

// Primary Vertices
ApplicationMgr.TopAlg += { "PrimaryVertexFinderAlg" };

//--------------------------------------------------------------
// Other additional algorithms to be executed, from public 
// or private code.
// >>>>>>>>>>>> To be customized for a specific job <<<<<<<<<<<<
//--------------------------------------------------------------
// The various selections algorithms are listed here 
// EACH COMPLETE SELECTION HAS TO BE EXECUTED BY ITSELF
//
// Bd->J/Psi(mu+mu-)Ks(pi+pi-)
//  ApplicationMgr.TopAlg += { "SelectJpsi2mumu",
//                             "SelectKs2pipi",
//                             "SelectBd2JpsiKs" };
//  #include "$PHYSSELECTIONSROOT/options/SelectJpsi2mumuForBd2JpsiKs.opts"
//  #include "$PHYSSELECTIONSROOT/options/SelectKs2pipiForBd2JpsiKs.opts"
//  #include "$PHYSSELECTIONSROOT/options/SelectBd2Jpsi2mumu_Ks2pipi.opts"
// Data sets for this channel (Brunel v13r1)
//  #include "$LHCBHOME/project/web/cards/411300.opts"


// Bs -> J/Psi(mu+mu-) phi(KK)
ApplicationMgr.TopAlg += { 
  "Select2ParticleDecay/SelectJpsi2mumuForBs2Jpsiphi",
  "Select2ParticleDecay/Selectphi2KKForBs2Jpsiphi",
  "Select2ParticleDecay/SelectBs2Jpsi2mumu_phi2KK"
};
//  #include "$PHYSSELECTIONSROOT/options/SelectJpsi2mumuForBs2Jpsiphi.opts"
//  #include "$PHYSSELECTIONSROOT/options/Selectphi2KKForBs2Jpsiphi.opts"
//  #include "$PHYSSELECTIONSROOT/options/SelectBs2Jpsi2mumu_phi2KK.opts"
// Data sets for this channel (Brunel v13r1)
//  #include "$LHCBHOME/project/web/cards/611300.opts"

// Uncomment the following line to run the example UserAlgorithm
//  ApplicationMgr.TopAlg += { "UserAlgorithm" }; 

// Private algorithm options can be listed here or included from
// here.

// Switch on to produce a miniDST file
//  #include "$DAVINCIROOT/options/DaVinciMiniDst.opts"

//-----------------------------------------------------------------
// Options for algorithms and tools in DaVinciTools library
// can be added here to overwrite any of the default options
// Examples are in the options subdirectory of the packages
//-----------------------------------------------------------------

//--------------------------------------------------------------
// Set output level thresholds (2=DEBUG, 3=INFO, 4=WARNING, 5=ERROR, 6=FATAL )
//--------------------------------------------------------------
MessageSvc.OutputLevel                  = 3;
ToolSvc.OutputLevel                     = 3;
XmlParserSvc.OutputLevel                = 4;
PrimaryVertexFinderAlg.OutputLevel      = 4;
ChargedProtoPAlg.OutputLevel            = 2;
MCPIDProtoPAlg.OutputLevel              = 2;
SelectKs2pipi.OutputLevel               = 3;
SelectKs2pipi.PhysDesktop.OutputLevel   = 3;

// Modify Message Format to print algorithm name with 40 characters
MessageSvc.Format = "% F%40W%S%7W%R%T %0W%M";

//---------------------------------------------------------------
// Number of events to process, skip and printing frequency
//---------------------------------------------------------------
ApplicationMgr.EvtMax = 500;
EventSelector.FirstEvent = 1;
EventSelector.PrintFreq = 1;
   
//################################################################

