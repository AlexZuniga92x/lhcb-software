// $Id: DVTestBd2KstarMuMu.opts,v 1.8 2008-10-29 13:50:58 pkoppenb Exp $
// ============================================================================
// CVS tag $Name: not supported by cvs2svn $, version $Revision: 1.8 $
// ============================================================================
/** @file DVTestBd2KstarMuMu.opts
 *
 *  Test file for HLT Bd->MuMuK* selection
 *
 *  @author P. Koppenburg
 *  @date 2007-07-20
 */
//--------------------------------------------------------------
//
// Preselection
//
#include "$B2DILEPTONROOT/options/DVPreselBd2KstarMuMu.opts"
//
// Truth checking for Bd -> MuMuK*
//
ApplicationMgr.TopAlg += { "GaudiSequencer/FindTrueDecay"};
FindTrueDecay.IgnoreFilterPassed = true ;
//----------------------------------------------------------------------------------------------------
//
// Truth filter for Bd -> MuMuK*  No PID
//
FindTrueDecay.Members += { "OldFilterDesktop/SelectTrueNoPIDsDecay"};
SelectTrueNoPIDsDecay.FilterCriterion = "ByPIDFilterCriterion";
SelectTrueNoPIDsDecay.PhysDesktop.InputLocations = { "Phys/StdDC06NoPIDsPions", 
                                                     "Phys/StdDC06NoPIDsKaons",
                                                     "Phys/StdDC06NoPIDsMuons" } ;
SelectTrueNoPIDsDecay.Filter.Selections =  { "K+ : TrueMCFilterCriterion/Decay",
                                             "pi+ : TrueMCFilterCriterion/Decay",
                                             "mu+ : TrueMCFilterCriterion/Decay"} ;
//
// The decay descriptor is the only part that requires some thinking...
//
SelectTrueNoPIDsDecay.Filter.Decay.MCDecayFinder.Decay = "[[B0]nos => ^K+ ^pi- ^mu+ ^mu- {,gamma}{,gamma}{,gamma}{,gamma}]cc, [[B0]os => ^K- ^pi+ ^mu+ ^mu- {,gamma}{,gamma}{,gamma}{,gamma}]cc" ;
//
// Dummy MakeResonances to check that all tracks are there
//
FindTrueDecay.Members += { "MakeResonances/AllTrueNoPIDsDecay"};
AllTrueNoPIDsDecay.PhysDesktop.InputLocations = {"Phys/SelectTrueNoPIDsDecay"};
AllTrueNoPIDsDecay.DecayDescriptor = "[B0 -> K+ pi- mu- mu+]cc" ; // all particles need to be there
//----------------------------------------------------------------------------------------------------
//
// Truth filter for Bd -> MuMuK* Loose PID : copy of above with NoPIDs -> Loose 
//
FindTrueDecay.Members += { "OldFilterDesktop/SelectTrueLooseDecay"};
SelectTrueLooseDecay.FilterCriterion = "ByPIDFilterCriterion";
SelectTrueLooseDecay.PhysDesktop.InputLocations = { "Phys/StdDC06LoosePions", "Phys/StdDC06LooseKaons","Phys/StdDC06LooseMuons" } ;
SelectTrueLooseDecay.Filter.Selections =  { "K+ : TrueMCFilterCriterion/Decay",
                                            "pi+ : TrueMCFilterCriterion/Decay",
                                            "mu+ : TrueMCFilterCriterion/Decay"} ;
//
// The decay descriptor is the only part that requires some thinking...
//
SelectTrueLooseDecay.Filter.Decay.MCDecayFinder.Decay = "[[B0]nos => ^K+ ^pi- ^mu+ ^mu- {,gamma}{,gamma}{,gamma}{,gamma}]cc, [[B0]os => ^K- ^pi+ ^mu+ ^mu- {,gamma}{,gamma}{,gamma}{,gamma}]cc" ;
//
// Dummy MakeResonances to check that all tracks are there
//
FindTrueDecay.Members += { "MakeResonances/AllTrueLooseDecay"};
AllTrueLooseDecay.PhysDesktop.InputLocations = {"Phys/SelectTrueLooseDecay"};
AllTrueLooseDecay.DecayDescriptor = "[B0 -> K+ pi- mu- mu+]cc" ; // all particles need to be there
//
// Correlations
//
ApplicationMgr.TopAlg += { "AlgorithmCorrelationsAlg/TestCorrelations" };
TestCorrelations.AlgorithmCorrelations.OnlyNonZero = false;
TestCorrelations.Algorithms = { "AllTrueNoPIDsDecay", "AllTrueLooseDecay",                               // truth
                                "PreselBd2KstarMuMu", "StdDC06LoosePenguinDimuon", "StdDC06LooseKstar2KPi" };    // presel
//
// Options
//
//-- GAUDI data cards generated on 11/8/07 5:37 PM
//-- For Event Type = 11114001 / Data type = DST 1

EventSelector.Input   = {
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-lumi2/00001586/DST/0000/00001586_00000001_5.dst' TYP='POOL_ROOTTREE' OPT='READ'",
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-lumi2/00001586/DST/0000/00001586_00000002_5.dst' TYP='POOL_ROOTTREE' OPT='READ'",
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-lumi2/00001586/DST/0000/00001586_00000003_5.dst' TYP='POOL_ROOTTREE' OPT='READ'",
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-lumi2/00001586/DST/0000/00001586_00000004_5.dst' TYP='POOL_ROOTTREE' OPT='READ'",
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-lumi2/00001586/DST/0000/00001586_00000005_5.dst' TYP='POOL_ROOTTREE' OPT='READ'"};

MessageSvc.Format = "% F%60W%S%7W%R%T %0W%M";

ApplicationMgr.EvtMax = 100 ;
EventSelector.FirstEvent = 1 ;
EventSelector.PrintFreq = 1 ;

// ApplicationMgr.TopAlg += { "PrintTree", "PrintMCTree" };
PrintTree.PhysDesktop.InputLocations = { "Phys/DVTestSharedDiMuon" };
PrintMCTree.ParticleNames = { "B0", "B~0" };
// DVTestAlleyMuons.OutputLevel = 1 ;
// DVTestForwardMuons.OutputLevel = 1 ;

