// $Id: DVTestBd2DstarPi.opts,v 1.6 2008-10-07 13:24:39 jpalac Exp $
// ============================================================================
// CVS tag $Name: not supported by cvs2svn $, version $Revision: 1.6 $
// ============================================================================
/** @file DVTestBd2DstarPi.opts
 *
 *  Test file for HLT Bd->MuMuK* selection
 *
 *  @author J. Palacios
 *  @date 2007-11-12
 */
//--------------------------------------------------------------
//
// Preselection
//
#include "$B2DSTARXROOT/options/DVPreselBd2DstarPi.opts"
//
// Truth checking for B0 -> D*Pi
//
ApplicationMgr.TopAlg += { "GaudiSequencer/FindTrueDecay"};
FindTrueDecay.IgnoreFilterPassed = true ;
//----------------------------------------------------------------------------------------------------
//
// Truth filter for B0 -> D*pi  No PID
//
FindTrueDecay.Members += { "OldFilterDesktop/SelectTrueNoPIDsDecay"};
SelectTrueNoPIDsDecay.FilterCriterion = "ByPIDFilterCriterion";
SelectTrueNoPIDsDecay.PhysDesktop.InputLocations = { "Phys/StdDC06NoPIDsPions",
                                                     "Phys/StdDC06NoPIDsKaons"} ;

SelectTrueNoPIDsDecay.Filter.Selections =  { "K+ : TrueMCFilterCriterion/Decay",
                                             "pi+ : TrueMCFilterCriterion/Decay"} ;
//
// The decay descriptor is the only part that requires some thinking...
//
SelectTrueNoPIDsDecay.Filter.Decay.MCDecayFinder.Decay = "{[[B0]nos -> ^pi+ {,gamma}{,gamma} (D*(2010)- -> ^pi- {,gamma}{,gamma} (D~0 -> ^K+ ^pi- {,gamma}{,gamma}{,gamma})) ...]cc, [[B~0]os -> ^pi+ {,gamma}{,gamma} (D*(2010)- -> ^pi- {,gamma}{,gamma} (D~0 -> ^K+ ^pi- {,gamma}{,gamma}{,gamma})) ...]cc}" ;
//
// Dummy MakeResonances to check that all tracks are there
//
FindTrueDecay.Members += { "MakeResonances/AllTrueNoPIDsDecay"};
AllTrueNoPIDsDecay.PhysDesktop.InputLocations = {"Phys/SelectTrueNoPIDsDecay"};
AllTrueNoPIDsDecay.DecayDescriptor = "[B0 -> pi- K+ pi- pi+]cc" ; // all particles need to be there
//----------------------------------------------------------------------------------------------------
//
// Truth filter for Bd -> D*Pi Loose PID : copy of above with NoPIDs -> Loose 
//
FindTrueDecay.Members += { "OldFilterDesktop/SelectTrueLooseDecay"};
SelectTrueLooseDecay.FilterCriterion = "ByPIDFilterCriterion";
SelectTrueLooseDecay.PhysDesktop.InputLocations = { "Phys/StdDC06LoosePions",
                                                    "Phys/StdDC06LooseKaons"} ;

SelectTrueLooseDecay.Filter.Selections =  { "K+ : TrueMCFilterCriterion/Decay",
                                            "pi+ : TrueMCFilterCriterion/Decay"} ;
//
// The decay descriptor is the only part that requires some thinking...
//
SelectTrueLooseDecay.Filter.Decay.MCDecayFinder.Decay = "{[[B0]nos -> ^pi+ {,gamma}{,gamma} (D*(2010)- -> ^pi- {,gamma}{,gamma} (D~0 -> ^K+ ^pi- {,gamma}{,gamma}{,gamma})) ...]cc, [[B~0]os -> ^pi+ {,gamma}{,gamma} (D*(2010)- -> ^pi- {,gamma}{,gamma} (D~0 -> ^K+ ^pi- {,gamma}{,gamma}{,gamma})) ...]cc}" ;
//
// Dummy MakeResonances to check that all tracks are there
//
FindTrueDecay.Members += { "MakeResonances/AllTrueLooseDecay"};
AllTrueLooseDecay.PhysDesktop.InputLocations = {"Phys/SelectTrueLooseDecay"};
AllTrueLooseDecay.DecayDescriptor = "[B0 -> pi- K+ pi- pi+]cc" ; // all particles need to be there
//AllTrueLooseDecay.DecayDescriptor = "[B0 -> D*(2010)- pi+]cc" ; // all particles need to be there
//
// Correlations
//
ApplicationMgr.TopAlg += { "SelResultCorrelations/TestCorrelations" };
TestCorrelations.AlgorithmCorrelations.OnlyNonZero = false;
TestCorrelations.Algorithms = { "AllTrueNoPIDsDecay", 
                                "AllTrueLooseDecay",
                                "StdDC06LooseD02KPi",
                                "StdDC06LooseDstarWithD02KPi",
                                "FilterDstarForBd2DstarPi", 
                                "PreselBd2DstarPi"          };

//-- GAUDI data cards generated on 11/12/07 6:36 PM
//-- For Event Type = 11463000 / Data type = DST 1
//--     Configuration = DC06 - phys-v2-lumi2
//--     DST 1 datasets produced by Brunel - v30r14
//--     From DIGI 1 datasets produced by Boole - v12r10
//--     From SIM 1 datasets produced by Gauss - v25r8
//--     Database version = v30r14
//--     Cards content = physical-physical
//--     
//-- Datasets replicated at CERN
//-- 200 dataset(s) - NbEvents = 99411
//-- 

EventSelector.Input   = {
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-v2-lumi2/00001695/DST/0000/00001695_00000001_5.dst' TYP='POOL_ROOTTREE' OPT='READ'",
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-v2-lumi2/00001695/DST/0000/00001695_00000002_5.dst' TYP='POOL_ROOTTREE' OPT='READ'",
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-v2-lumi2/00001695/DST/0000/00001695_00000003_5.dst' TYP='POOL_ROOTTREE' OPT='READ'",
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-v2-lumi2/00001695/DST/0000/00001695_00000004_5.dst' TYP='POOL_ROOTTREE' OPT='READ'",
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-v2-lumi2/00001695/DST/0000/00001695_00000005_5.dst' TYP='POOL_ROOTTREE' OPT='READ'",
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-v2-lumi2/00001695/DST/0000/00001695_00000006_5.dst' TYP='POOL_ROOTTREE' OPT='READ'"
};

MessageSvc.Format = "% F%60W%S%7W%R%T %0W%M";

ApplicationMgr.EvtMax = 500 ;
EventSelector.FirstEvent = 1 ;
EventSelector.PrintFreq = 1 ;


