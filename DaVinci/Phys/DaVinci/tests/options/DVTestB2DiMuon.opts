// $Id: DVTestB2DiMuon.opts,v 1.4 2008-11-07 17:04:38 jpalac Exp $
// ============================================================================
// CVS tag $Name: not supported by cvs2svn $, version $Revision: 1.4 $
// ============================================================================
/** @file DVTestB2Dimuon.opts
 *
 *  Test file for J/Psi->MuMu selection
 *
 *  @author J. Palacios
 *  @date 2008-10-20
 */
//--------------------------------------------------------------
//
// Preselection
//
#include "$B2DILEPTONROOT/options/DVPreselB2DiMuon.opts"
//
// Truth checking for Bd -> MuMuX
//
ApplicationMgr.TopAlg += { "GaudiSequencer/FindTrueDecay"};
FindTrueDecay.IgnoreFilterPassed = true ;
//-----------------------------------------------------------------------------
PreselB2DiMuon.PhysDesktop.RelatedPVFinder.OutputLevel=1;
//-----------------------------------------------------------------------------
FindTrueDecay.Members += { "OldFilterDesktop/SelectTrueNoPIDsDecay"};
//FindTrueDecay.Members += { "FilterDesktop/SelectTrueNoPIDsDecay"};
//SelectTrueNoPIDsDecay.FilterCriterion = "ByPIDFilterCriterion";
SelectTrueNoPIDsDecay.FilterCriterion = "TrueMCFilterCriterion";
SelectTrueNoPIDsDecay.PhysDesktop.InputLocations = {"Phys/StdDC06NoPIDsMuons" } ;
//SelectTrueNoPIDsDecay.Filter.Selections =  {"mu+ : TrueMCFilterCriterion/Decay"} ;
//SelectTrueNoPIDsDecay.Code = " ( 'J/psi(1S)' == ID ) & ( 2 == NINTREE('mu+' == ABSID) ) ";
//SelectTrueNoPIDsDecay.Code = "ALL";
//SelectTrueNoPIDsDecay.Filter.Decay.MCDecayFinder.Decay = "J/psi(1S) => ^mu+ ^mu- {,gamma}{,gamma}{,gamma}{,gamma}" ;
SelectTrueNoPIDsDecay.Filter.MCDecayFinder.Decay = "J/psi(1S) => ^mu+ ^mu- {,gamma}{,gamma}{,gamma}{,gamma}" ;
//
// Dummy MakeResonances to check that all tracks are there
//
FindTrueDecay.Members += { "CombineParticles/AllTrueNoPIDsDecay"};
AllTrueNoPIDsDecay.PhysDesktop.InputLocations = {"Phys/SelectTrueNoPIDsDecay"};
AllTrueNoPIDsDecay.MotherCut = "ALL";
AllTrueNoPIDsDecay.DecayDescriptors = ["J/psi(1S) -> mu+ mu-"] ; // all particles need to be there
//----------------------------------------------------------------------------------------------------
//
// Truth filter for Bd -> MuMuK* Loose PID : copy of above with NoPIDs -> Loose 
//
FindTrueDecay.Members += { "OldFilterDesktop/SelectTrueLooseDecay"};
//SelectTrueLooseDecay.FilterCriterion = "ByPIDFilterCriterion";
SelectTrueLooseDecay.FilterCriterion = "TrueMCFilterCriterion";
SelectTrueLooseDecay.PhysDesktop.InputLocations = { "Phys/StdDC06LooseMuons" } ;
//SelectTrueLooseDecay.Filter.Selections =  { "mu+ : TrueMCFilterCriterion/Decay"} ;
//
// The decay descriptor is the only part that requires some thinking...
//
//SelectTrueLooseDecay.Filter.Decay.MCDecayFinder.Decay ="J/psi(1S) => ^mu+ ^mu- {,gamma}{,gamma}{,gamma}{,gamma}" ;
SelectTrueLooseDecay.Filter.MCDecayFinder.Decay ="J/psi(1S) => ^mu+ ^mu- {,gamma}{,gamma}{,gamma}{,gamma}" ;
//
// Dummy CombineParticles to check that all tracks are there
//
FindTrueDecay.Members += { "CombineParticles/AllTrueLooseDecay"};
AllTrueLooseDecay.PhysDesktop.InputLocations = {"Phys/SelectTrueLooseDecay"};
AllTrueLooseDecay.MotherCut = "ALL";
AllTrueLooseDecay.DecayDescriptors = ["J/psi(1S) -> mu- mu+"] ; // all particles need to be there
//AllTrueLooseDecay.OutputLevel=1;
//
// Correlations
//
ApplicationMgr.TopAlg += { "AlgorithmCorrelationsAlg/TestCorrelations" };
TestCorrelations.AlgorithmCorrelations.OnlyNonZero = false;
TestCorrelations.Algorithms = { "SelectTrueNoPIDsDecay",
                                "AllTrueNoPIDsDecay",
                                "SelectTrueLooseDecay", 
                                "AllTrueLooseDecay",
                                "PreselB2DiMuon"};

//-- GAUDI data cards generated on 11/6/08 4:52 PM
//-- For Event Type = 11144103 / Data type = DST 1
//--     Configuration = DC06 - phys-v2-lumi2
//--     DST 1 datasets output 
//--     From DIGI 1 datasets produced by Boole - v12r10
//--     From SIM 1 datasets produced by ANY
//--     Database version = v30r14
//--     Cards content = physical-physical
//--     
//-- Datasets replicated at CERN
//-- 200 dataset(s) - NbEvents = 99391
//-- 
EventSelector.Input   = {
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-v2-lumi2/00001668/DST/0000/00001668_00000001_5.dst' TYP='POOL_ROOTTREE' OPT='READ'",
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-v2-lumi2/00001668/DST/0000/00001668_00000002_5.dst' TYP='POOL_ROOTTREE' OPT='READ'",
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-v2-lumi2/00001668/DST/0000/00001668_00000003_5.dst' TYP='POOL_ROOTTREE' OPT='READ'",
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-v2-lumi2/00001668/DST/0000/00001668_00000004_5.dst' TYP='POOL_ROOTTREE' OPT='READ'",
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-v2-lumi2/00001668/DST/0000/00001668_00000005_5.dst' TYP='POOL_ROOTTREE' OPT='READ'",
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-v2-lumi2/00001668/DST/0000/00001668_00000006_5.dst' TYP='POOL_ROOTTREE' OPT='READ'",
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-v2-lumi2/00001668/DST/0000/00001668_00000007_5.dst' TYP='POOL_ROOTTREE' OPT='READ'",
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-v2-lumi2/00001668/DST/0000/00001668_00000008_5.dst' TYP='POOL_ROOTTREE' OPT='READ'",
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-v2-lumi2/00001668/DST/0000/00001668_00000009_5.dst' TYP='POOL_ROOTTREE' OPT='READ'",
"DATAFILE='PFN:castor:/castor/cern.ch/grid/lhcb/production/DC06/phys-v2-lumi2/00001668/DST/0000/00001668_00000010_5.dst' TYP='POOL_ROOTTREE' OPT='READ'"
};


MessageSvc.Format = "% F%60W%S%7W%R%T %0W%M";

ApplicationMgr.EvtMax = 1000 ;
EventSelector.FirstEvent = 1 ;
EventSelector.PrintFreq = 100 ;

// ApplicationMgr.TopAlg += { "PrintTree", "PrintMCTree" };
PrintTree.PhysDesktop.InputLocations = { "Phys/DVTestB2DiMuon" };
PrintMCTree.ParticleNames = { "B0", "B~0" };
// DVTestAlleyMuons.OutputLevel = 1 ;
// DVTestForwardMuons.OutputLevel = 1 ;

