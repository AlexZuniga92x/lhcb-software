!-----------------------------------------------------------------------------
! Package     : Phys/DisplVertices
! Responsible : Neal Gauvin
! Purpose     : Stripping and Offline algorithms and tools for the selection
!               of events with exotic displaced vertices
!-----------------------------------------------------------------------------

! 2011-04-12 - Neal Gauvin
 - Added new features for SaveTuple. 
 - Added new cut : BackToBack = dphi to request for at least one pair of
   candidates that are back to back (azimuthal angle > dphi) with respect to 
   the upstream PVs. 

!========================== DisplVertices v7r5 2011-03-28 ====================

! 2011-03-24 - Victor Coco
 - Add the beamspot method using velo resolver position.
   Fix potential memory leak when new particles are created out of clones

!========================== DisplVertices v7r4 2011-03-10 ====================

! 2011-02-28 - Victor Coco
- Split CopyDownstreamTracks.cpp to a headrer and a source file

! 2011-02-24 - Victor Coco
- Modification of CopyDownstreamTracks to make it a GaudiAlgorithm. Change 
  i/o to Inputs Output to mimic DVALgorithm

! 2011-02-24 - Victor Coco
- remove ntupling of trigger infos in DisplVertices

! 2011-02-23 - Victor Coco
-  Simplification of the RecVertices2Particles class, removing the developpment
   functions and unnecessary cuts. Update for stripping 13

!========================== DisplVertices v7r3 2011-01-21 ====================

! 2011-01-14 - Victor Coco
-  Modification to the way candidates are saved to the TES 

SaveTuple : save the SPD multiplicity applied in the hadron and electron triggers.

!========================== DisplVertices v7r2 2010-12-20 ====================

! 2010-12-16 - Neal Gauvin
	SaveTuple : save also the reconstructed charge.

! 2010-12-16 - Neal Gauvin
	Retrieve Hlt global decision from routing bits instead of HltDecReport.

! 2010-12-13 - Neal Gauvin
 - Added ClearifrunNumberChange parameter in CalibrateIP : reset all statistics if runNumber has changed.

! 2010-12-08 - Neal Gauvin
 - Major update of CalibrationIP to make it more reactable to beam moves.

! 2010-12-06 - Neal Gauvin
 - Save the PV candidates in the tuple when SaveTuple is set.
 - Removed bug : GetUpstreamPV was using beamline info before beamline info is actually retrieved...

!========================== DisplVertices v7r1 2010-11-04 ====================

! 2010-11-04 - Juan Palacios
 - src/RecVertices2Particles.cpp
  . Replace "and" for "&&" to please vc7.1.

! 2010-10-28 - Victor Coco
 - Added a return false in IsInMaterialBoxRight and IsInMaterialBoxLeft in case the detector element was not accessed correctly
   and the vector of sensor position is empty

! 2010-10-26 - Neal Gauvin
 - Added FromPreyInfo Rcut method in DisplVertices.cpp (use the info put in the particle in RecVertices2Particles)

! 2010-10-26 - Neal Gauvin
 - Added the possibility to measure the radial displacement with respect 
   to the upstream PV when no beam line infos are found.

! 2010-10-25 - Neal Gauvin
 - Allow checking the first RV with FromBeamLine method.

! 2010-10-25 - Neal Gauvin
 - Check consistency of newly added features.

! 2010-10-25 - Victor Coco
 - Modification of the upstream PV selection (in +/- 400mm), and keep selecting it when cutting on 
   beamline distance (avoid DV backward PV)
   New cut on material, moving with the halfbox frame introduced
   R wrt beam line stored in extra info 52 and is in material stored in extra info 51

! 2010-10-22 - Neal Gauvin
 - RecVertices2Particles : Require non Velo tracks to have Q/P significance 
   not in [-20, 20] to enter the Particle fit.

! 2010-10-18 - Neal Gauvin
 - options/myJob.py adapated to new reconstruction scheme agreed on 15th october (Jets/Exotica WG).


! 2010-10-11 - Neal Gauvin
 - RecVertices2Particles : TrackMaxChi2oNDOF set to 10 by default to reflect actual cut on protoparticles.

!========================== DisplVertices v7r0 2010-10-04 ====================

! 2010-09-30 - Neal Gauvin
 - Add new cut in RecVertices2Particles : TrackMaxChi2oNDOF
   The max allowed chi2/ndof of daughter track to be kept in the vertex candidate.

! 2010-09-20 - Neal Gauvin
 - The DisplVertices package is being moved from project Analysis to Stripping
   ( task #17349 ). MC-dependent code has been put in the newly created 
   DisplVerticesMC packages. In more details :
	 * SaveParticlesFrom : moved to Phys/DisplVerticesMC
   * DisplVertices : MC-dependent code moved to Phys/DisplVerticesMC under 
                     the name MCDisplVertices.
   The physics remains unaffected.

!========================== DisplVertices v6r11 2010-09-06 ===================

! 2010-08-24 - Neal Gauvin
 - Added SumPt cut in RecVertices2Particles before creating the Particles.  

! 2010-08-24 - Neal Gauvin
 - Require at least one backward and one forward track in upPV candidate.

!========================== DisplVertices v6r10 2010-08-20 ===================

! 2010-08-05 - Neal Gauvin
 - New option UsePartFromTES in RecVertices2Particles. DisplVertices consequently adapted.

! 2010-08-02 - Neal Gauvin
 - Code improvements for speed.
 - Add new features for tupling.

! 2010-07-27 - Neal Gauvin
 - Bug fixed in RecVertices2Particles and DisplVertices when working with RCutMethod = "FromBeamLine"
 - Added some more comments in CalibrateIP

! 2010-07-23 - Neal Gauvin
 - RecVertices2Particles capable of working without any given input Particles (Only RecVertex made of Velo tracks).

!========================== DisplVertices v6r9 2010-07-08 ===================

! 2010-07-01 - Neal Gauvin
 - Remove use of new in execute() to avoid potential leaks

! 2010-06-30 - Neal Gauvin
 - Cosmethic changes

!========================== DisplVertices v6r8 2010-06-24 ===================

! 2010-06-21 - Neal Gauvin
 - Added some cuts for the selection of the upstream PV candidate.

!========================== DisplVertices v6r7 2010-05-24 ===================

! 2010-05-21 - Neal Gauvin
 - Do not take candidates that are upstream the upstream PV.

! 2010-05-14 - Neal Gauvin
 - Upstream primary vertices are taken within |z|<150mm.

! 2010-05-12 - Juan Palacios
 - Adapt to new IDVAlgorithm interface

! 2010-05-12 - Juan Palacios
 - Adapt to new DVAlgorithm::primaryVertices() signature.
 - Increase to v6r7

!========================== DisplVertices v6r6 2010-04-20 ===================

! 2010-04-16 - Neal Gauvin
 - src/DisplVertices.cpp, src/RecVertices2Particles.cpp
  . Use Particle::Range instead of Particle::Container for input.

! 2010-04-16 - Juan Palacios
 - src/DisplVertices.cpp, src/RecVertices2Particles.cpp
  . Use Track::Range instead of Track::Container for input.
  . To-do: do the same for Particles.

! 2010-04-14 - Neal Gauvin
 - Comfort improvement in RecVertices2Particles and DisplVertices

! 2010-04-12 - Neal Gauvin
 - bug fixed in RecVertices2Particles and DisplVertices

!========================== DisplVertices v6r5 2010-04-09 ===================

! 2010-04-09 - Neal Gauvin
 - Cosmethic changes, plus minor fixes for comfort on analyzing real data

!========================== DisplVertices v6r4 2010-04-08 ===================
! 2010-03-22 - Neal Gauvin
 - remove any print out in initialize() for default

! 2010-03-18 - Neal Gauvin
 - cosmethic changes in RecVertices2Particles and DisplVertices

! 2010-03-18 - Neal Gauvin
 - Bug #64490 fixed in RecVertices2Particles

!========================== DisplVertices v6r3 2010-03-17 ===================
! 2010-03-15 - Neal Gauvin
 - Bug fixed in DisplVertices

! 2010-03-12 - Neal Gauvin
 - Save also run number in tuples

!==================== Phys/DisplVertices v6r2 2010-03-08 =====================

! 2010-03-03 - Neal Gauvin
 - Fix important bug in DisplVertices

! 2010-02-23 - Neal Gauvin
 - Add new algorithm Calibration to simulate the beam calibration
   Intended only for MC offline simulation.
   Do not use unless you know what you are doing


!==================== Phys/DisplVertices v6r1 2010-02-22 =====================


! 2010-02-19 - Neal Gauvin
 - Add possibility to save candidates on TES for DisplVertices

! 2010-02-17 - Neal Gauvin
 - Add features to DisplVertices and RecVertices2Particles

! 2010-02-12 - Neal Gauvin
 - Add features to DisplVertices and RecVertices2Particles

! 2010-02-10 - Patrick Koppenburg
 - Remove _dll file

! 2010-02-08 - Neal Gauvin
 - cmt/requirements
	. Add all necessary requirements to compile

!==================== Phys/DisplVertices v6r0p1 2010-02-02 =====================

! 2010-02-05 - Juan Palacios
 - cmt/requirements
  . Remove AnalysisSys circular dependency that breaks the whole build.
  . Increase to v6r0p1


! 2010-02-03 - Neal Gauvin
 - Fix small bug in DisplVertices.cpp, SaveTrigInfinTuple() now run before any cuts...

!==================== Phys/DisplVertices v6r0 2010-02-02 =====================

! 2010-01-28 - Neal Gauvin
 - First official commit of the package. 
 - RecVertices2Particles : 
     * take input reconstructed vertices and apply basic cuts to remove 
       the PVs, vertices from interaction with the matter of the detector 
       and low mass vertices.
     * Turn candidates into Particles to be saved in TES.
 - DisplVertices essentially loops on the candidates Particle and applies cuts
     * Successful candidates can be saved in TES.
     * Basic properties of successful candidates can be saved in a tuple.
