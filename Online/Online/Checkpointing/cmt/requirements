#============================================================================
# Maintainer : Markus Frank
#============================================================================
package           Checkpointing
version           v0r1
#============================================================================
branches          cmt doc src Checkpointing
# dependency list
use GaudiPolicy v*

include_dirs  $(CHECKPOINTINGROOT)
apply_pattern install_more_includes more=Checkpointing

# ==================== component libraries ==================================
application restore     ../aux/main.cpp

private 
macro cmt_installarea_linkopts ''
macro cpplinkflags             ' -static -g -O0 ' WIN32 ''

public
library Checkpointing 	../aux/Image.cpp         \
			../src/File_test.cpp     \
			../src/MemMaps_test.cpp  \
			../src/Process_test.cpp  \
			../src/Chkpt_test.cpp
macro_append lib_Checkpointing_cppflags ' -g -O0 -ansi -Wreturn-type -Wunused -fPIC ' WIN32 ''
macro_append lib_Checkpointing_cppflags " -Wextra " \
  target-icc " -wd111 -wd180 -wd188 -wd310 -wd981 -wd1418 -wd1419 -wd1599 -wd2259 "

macro_append Checkpointing_shlibflags   ' -Wl,--no-undefined -pthread -ldl '    WIN32 ''

library Chkpt  		*.cpp
macro_append Chkpt_shlibflags           ' -Wl,--no-undefined -ldl -pthread -shared ' WIN32 ''

apply_pattern QMTest
apply_pattern QMTestSummarize

# This we cannot build neither on Windows nor on 32 bit platforms!
apply_pattern disable_package_on platform=target-winxp
apply_pattern disable_package_on platform=target-i686
apply_pattern disable_package_on platform=target-ia32

