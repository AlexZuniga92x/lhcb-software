package PVSS
version v3r1

branches  cmt doc src
use LCG_Settings v* 
use GaudiPolicy  v*
#macro PVSS_home "$(SITEROOT)/lhcb/online/control/pvss/3.6" \
#  WIN32         "C:/PGM/PVSS2_3.6"
macro PVSS_home "/opt/pvss/pvss2_v3.6"
macro PVSS_native_version "V36_051"
macro PVSS_api   "$(PVSS_home)/api"
macro PVSS_inc   "$(PVSS_api)/include"
#set PVSS_II      '/localdisk/pvss/TESTSTORAGE/config/config'
set PVSS_II      '/localdisk/pvss/STORAGE/config/config'
set PVSS_II_HOME "$(PVSS_home)"
set PVSS_SYSTEM_ROOT "$(PVSS_home)"
set PROJECT_ROOT     "."
set PLATFORM         "linux_ELT4"

path_append PATH            "$(PVSS_home)/bin"
path_append LD_LIBRARY_PATH "$(PVSS_home)/api/lib.linux" WIN32 ""
path_append LD_LIBRARY_PATH "$(PVSS_home)/bin"           WIN32 ""

include_dirs "$(PVSS_inc)"

macro_append PVSS_cppflags " -DLINUX2_6 -DGLIBC2_3 "\
 WIN32  '/FI"$(PVSS_inc)/winnt/win32.h" /D "WIN32" /D "IS_MSWIN__" /D "_EXCURSION" /D "bcm_boolean_h" /D "FUNCPROTO" /GX /D _WIN32 '

macro_append PVSS_cppflags \
' -I"$(PVSS_inc)/Basics/DpBasics" -I"$(PVSS_inc)/Basics/Utilities" -I"$(PVSS_inc)/Basics/Variables" -I"$(PVSS_inc)/Basics/NoPosix" -I"$(PVSS_inc)/Ctrl" -I"$(PVSS_inc)/BCMNew" -I"$(PVSS_inc)/Configs" -I"$(PVSS_inc)/Datapoint" -I"$(PVSS_inc)/Messages" -I"$(PVSS_inc)/Manager"'

macro_append PVSS_cppflags " -D__PC -D__UNIX -DHAS_TEMPLATES=1 -DBC_DESTRUCTOR -Dbcm_boolean_h -DOS_LINUX -DLINUX -DLINUX2 -Wno-deprecated -DDLLEXP_BASICS= -DDLLEXP_DATAPOINT= -DDLLEXP_CONFIGS= -DDLLEXP_MANAGER=  -DDLLEXP_MESSAGES= -DDLLEXP_CTRL= -DGCC3 -DUSES_NEW_IOSTREAMS -m32 " \
  WIN32 ' -I"$(PVSS_inc)/winnt/pvssincl" '

macro PVSS_link "-lstdc++ -lc  $(PVSS_home)/bin/libwklin.so.4 -L$(PVSS_api)/lib.linux -lManager$(PVSS_native_version) -lMessages$(PVSS_native_version) -lDatapoint$(PVSS_native_version) -lBasics$(PVSS_native_version) -lConfigs$(PVSS_native_version) -lbcm$(PVSS_native_version) -lCtrl$(PVSS_native_version) -lConfigs$(PVSS_native_version) -lPVSSUtilV36 -lV24 -lm -lgs -lpam -m32 -lpthread -lrt " \
  WIN32 ' /LIBPATH:"$(PVSS_api)/lib.winnt" libManager.lib libMessages.lib libDatapoint.lib libBasics.lib bcm.lib'

macro cpp 'gcc32 -m32 '
macro shlibbuilder 'g++32 -m32 $(cmt_installarea_linkopts) '
macro_remove libraryshr_linkopts "-Wl,--as-needed"

# libCtrl.lib libConfigs.lib 
# -lCtrl$(PVSS_native_version)
