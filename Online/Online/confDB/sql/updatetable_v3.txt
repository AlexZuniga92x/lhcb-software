ALTER TABLE LHCB_hw_CPNTS RENAME COLUMN CPNTS_STATUS TO CPNT_STATUS;
alter table lhcb_cpnt_history drop constraint lhcb_comphist_snb_fk;
alter table lhcb_lg_cpnts drop constraint lhcb_lg_cpnt_snb_fk;
alter table lhcb_hw_cpnts drop constraint LHCB_COMPSERIALNB_PK;
alter table lhcb_cpnt_history modify (serialnb number);
alter table lhcb_lg_cpnts modify (serialnb number);
alter table lhcb_hw_cpnts add ( snbid number);
alter table lhcb_cpnt_history rename column serialnb to snbid;
alter table lhcb_lg_cpnts rename column  serialnb to snbid;
alter table lhcb_hw_cpnts add constraint LHCB_COMPSERIALNB_PK primary key(snbid);
alter table lhcb_lg_cpnts  add constraint lhcb_lg_cpnt_snb_fk FOREIGN KEY (SNBID) REFERENCES LHCB_HW_CPNTS(SNBID);
alter table lhcb_cpnt_history add constraint lhcb_comphist_snb_fk FOREIGN KEY (SNBID) REFERENCES LHCB_HW_CPNTS(SNBID);
create sequence lhcb_hw_cpnts_snbid_seq minvalue 0 start with 1 increment by 1;
DROP INDEX  lhcb_serialupdatehist1_idx ;
DROP INDEX lhcb_serialhist1_idx;
CREATE INDEX lhcb_serialupdatehist1_idx ON lhcb_cpnt_history (snbid,status_change);
CREATE INDEX lhcb_serialhist1_idx ON lhcb_cpnt_history (snbid) ;
CREATE INDEX lhcb_snbid_idx ON lhcb_hw_cpnts (serialnb);
CREATE INDEX lhcb_mboard_idx ON lhcb_lg_cpnts (motherboardid);
CREATE INDEX lhcb_location_idx ON lhcb_hw_cpnts (location);
alter table lhcb_microscopic_connectivity rename column portnb_from to portidfrom;
alter table lhcb_hw_cpnts add (replacable number);
alter table lhcb_microscopic_connectivity add (lkused number);
res2=InsertMultipleLogicalDevices("TFC","-1","VELO_L1FE",0,0,"-1","","lana","","",1,1,ErrMess);
insert into lhcb_hw_cpnts(serialnb,snbid) values ('none',-1);
--commit;
--insert into lhcb_lg_devices(devicename,node,deviceid) values ('none',0,-1);
--commit;