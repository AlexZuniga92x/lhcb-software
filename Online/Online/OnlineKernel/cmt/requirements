package OnlineKernel

branches  cmt doc src

include_dirs $(ONLINEKERNELROOT)/OnlineKernel $(ONLINEKERNELROOT)/NEW
use GaudiPolicy v*
library       pthread_extern  ../thread/pthread.cpp
macro_append  pthread_extern_cppflags ' -DNEED_SEM -D__CLEANUP_C -DWIN32 -D_DEBUG -D_WINDOWS -D_USRDLL -DPTW32_BUILD'

library       OnlineKernel ../src/WT/*.cpp   \
                           ../src/MBM/*.cpp  \
                           ../src/RTL/*.cpp  \
                           ../src/PUBAREA/*.cpp  \
                           ../src/TAN/*.cpp  \
                           ../src/AMS/*.cpp  \
                           ../src/SCR/*.cpp  \
                           ../src/CPP/*.cpp  \
                           ../src/NET/*.cpp


macro_append  OnlineKernel_cppflags ' -I"/pthreads" '
macro_append  OnlineKernel_shlibflags ' -lpthread -lrt -lcurses ' \
   WIN32                              ' ../$(CMTCONFIG)/pthread_extern.lib '

apply_pattern ld_library_path
apply_pattern linker_library   library=OnlineKernel
apply_pattern linker_library   library=pthread_extern
application   test ../main/wt.cpp
application   gentest ../main/gentest.cpp
document      install_includes install_includes
macro_append  use_linkopts " -ldl " WIN32 ""

private
macro_append  cppflags " -ansi -pedantic-errors -W -Wall -Woverloaded-virtual -Wno-long-long -Wnon-virtual-dtor -Wwrite-strings -Wpointer-arith -Wno-non-template-friend -Wimplicit -Wreturn-type -Wunused -Wparentheses -Wctor-dtor-privacy -pthread -fmessage-length=0 -ftemplate-depth-300 " WIN32 ""
