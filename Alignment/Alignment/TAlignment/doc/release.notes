<PRE>
Package	:	Alignment/TAlignment
Package Coordinator	:	Jan Amoraal, Johan Blouw
Purpose	: collection of alignment algorithms

! 2010-02-19 - Rob Lambert
 - fix and/or precedence warning in GetElementsToBeAligned.h

! 2010-02-18 - Rob Lambert
 - Fix ambiguous else warning in AlignChisqConstraintTool.cpp

! 2010-02-09 - Wouter Hulsbergen
 - dump most important alignment dofs from AlignUpdateTool
 - fix problem with survey constraints for alignables that share all det elements with mother alignables
 - configurables: added configurable for T, add 'None' as a valid dof, set survey errors by jop option of AlignChi2ConstraintTool

</PRE><H1><A NAME=v4r7>2010-02-08 TAlignment v4r7</A></H1><PRE> 
 - J. Blouw: Contrary to what is written below, v4r7 will now be used
   for Alignment release v4r6.
 - J. Blouw tagged the package v4r7.


! 2010-02-07  Stefania Vecchi
 - removed ResidualsM1 algo 

! 2010-02-06 Johan Blouw
 - updated the CalcResidual call according to ITAConfigTool.

! 2010-02-06 Stefania Vecchi
 - added ResidualsM1 algo to check residuals between the Long tracks and the 
   Muon hits in M1

</PRE><H1><A NAME=v4r5>2010-02-05 TAlignment v4r6</A></H1><PRE>
 - Johan Blouw tagged the package v4r6 for alignment release v4r6.

! 2010-02-05 Johan Blouw
 - removed update conditions dbase call from GAlign. It wasn't needed.
 - small changes to Configuration.py, reflects changes up & 
   downstream to M'pede style alignment

! 2010-01-21 Wouter Hulsbergen
 - AlignChisqConstraintTool: add functionality to read survey constraints from an xml file
 - AlignConstraintTool: add functionality to fix lagrange constraints to 'nominal' and not just the 'delta'
 - remove the leading 'T/' from OT and IT alignable names
 - added directory with survey xml

! 2009-01-04 Wouter Hulsbergen
 - extended functionality of chisquare constraints
 - added 'SurveyConstraints.py'

! 2009-12-30 Wouter Hulsbergen
 - added 'initTime' to Al::Equations; added tests to make time of accumulate and update match
 - access tracks as Range

! 2009-12-28 Johan Blouw
 - fixed mismatch between calls to ITAConfig interface...

! 2009-12-27 Johan Blouw
 - replaced GAlign by M. Deissenroth's implementation of the millepede style alignment

! 2009-12-15 - Stefania Vecchi
 - added functionalities to TrackFilterAlg to select Muon Tracks
 - added MakeMuonTrack.cpp (h) make an LHCb track of a given MuonTrack (in substitution of CopyNNetTrack)

! 2009-11-22 - Wouter Hulsbergen
 - bug fix in element sorting: relevant when having redundant parameters (mothers + daughters)
 - added more TT alignables
 - alequations now keeps track of unmber of tracks (also in overlaps)

</PRE><H1><A NAME=v4r5>2009-11-23 TAlignment v4r5</A></H1><PRE>
! 2009-11-23 Johan Blouw
 - release v4r5 for Alignment v4r4

! 2009-11-22 - Wouter Hulsbergen
 - Fix xml writer configuration such that is fill author and description tag in xml

! 2009-11-19 - Wouter Hulsbergen
 - Added TT halflayers to Alignables.py
 - Made postMoniSeq a bit smarter in Configuration.py

! 2009-11-11 - Wouter Hulsbergen
 - TrackResidualTool can now perform internally a kalmansmoother iteration.
   This means we no longer need a special trackfit configuration. This needs 
   the next version of REC.

! 2009-11-04 - Wouter Hulsbergen
 - added M1 to muon alignables
 - added suvery constraints to configuration

</PRE><H1><A NAME=v4r4>2009-11-02 TAlignment v4r4</A></H1><PRE>
! 2009-11-02 Johan Blouw
 - tagging v4r4

! 2009-10-09 - Wouter Hulsbergen
 - adapted to changes in LHCb::Track
 - adapted to changes in AlignKernel (adding first/last event time)

! 2009-09-23 - Johan Blouw
 - added WriteAlignmentConditions to M'pede style alignment sequence

</PRE><H1><A NAME=v4r3>2009-07-27 TAlignment v4r3</A></H1><PRE>
! 2009-07-27 - Johan Blouw
 - tagged this package v4r3 for Alignment software release v4r3

! 2009-07-10 - Wouter Hulsbergen
 - adapted to migration to TrackKernel

</PRE><H1><A NAME=v4r2>2009-07-06 TAlignment v4r2</A></H1><PRE>

! 2009-07-06 Wouter Hulsbergen
 - migrated from SolvKernel to AlignKernel
 - added IAlignUpdateTool to python dictionary
 - added code to use mass constrained J/psi in alignment

! 2009-04-22 Wouter Hulsbergen
 - added functionality to put contraint on movement of primary vertex

! 2009-04-17 Johan Blouw
 - small change to Configuration.py so that Velo M'pede style alignment does not use GAlign/TAConfig.

</PRE><H1><A NAME=v4r1>2009-04-03 TAlignment v4r1</A></H1><PRE>
! 2009-03-04 Johan Blouw tag v4r1 for Alignment_v4r1

! 2009-03-10 Wouter Hulsbergen
 - restored information lost in head of configuration + clean up

</PRE><H1><A NAME=v4r0>2009-02-21 TAlignment v4r0</A></H1><PRE>

! 2009-02-21 Johan Blouw
 - introduced Configurable
 - moved option-type python scripts to options subdir
 - removed the linker library
 - changed version to v4r0.
 . Note: two sequences proven to work (Millepede OT-layers & Kalman OT-layers)

! 2009-01-13 Wouter Hulsbergen: 
 - Adapted to changes in SolvKernel
 - Added functionality to compute only subset of track-track hit correlations in VertexResidualTool
 - Added constrains for z-bowing
 - Added functionality to align dos at different granularity simultaneously, e.g. C-frames in z and modules in x.
 - Make AlConfigurable a LHCbConfigurableUser

</PRE><H1><A NAME=v3r7>2008-09-12 TAlignment v3r7</A></H1><PRE>

- Johan Blouw: 2008-09-12: tagged package v3r7 for alignment project release v3r2

! 2008-07-07 - Jan Amoraal
 - Throw StatusCode::FAILURE when no elments are given in GetElementsToBeAligned
 - Added some more ot alignables
 - Added property to change log filename to AlConfigurable  
 - Added property to change frame to AlConfigurable
 - Use index of elements as histogram directories ( easier to loop over )

! 2008-07-17 - Louis Nicolas
 - Commented unused variables in GAlign

</PRE><H1><A NAME=v3r5>2008-06-17 TAlignment v3r6</A></H1><PRE>
- Johan Blouw: 2008-06-17, tagged the head as v3r6 for alignment release v3r1

! 2008-06-06 - Louis Nicolas
 - added safety checks in AlParameters and AlignAlgorithm to avoid FPEs

! 2008-05-30 - Louis Nicolas
 - added TrackRemoveDoubleHits in Pat Rec sequence (AlConfigurable.py).
 - added fit sequence in case pat rec is not run (ITOTTracking.py).
 - added AlignITBoxes.py script to align IT boxes (and gives an example of how to set misalignments in xml or sqlite).
 - removed cut on chi2 in TrackFilterAlg as it is better to cut after the fit (using TrackContainerCleaner along with AlignSelTool, for example).
 - some clean-up in Escher_nikhef.opts

! 2008-05-29 - Louis Nicolas
 - added alignable objects in Alignables.py
 - added possibility to give a list of sub-detectors for which to write out the conditions in AlConfigurable.py + some clean-up

</PRE><H1><A NAME=v3r5>2007-12-19 TAlignment v3r5</A></H1><PRE>
- Johan Blouw: 2008-06-16, tagged the head as v3r5

! 2008-05-16 Johan Blouw
 - restructered main execution loop of GAlign to reflect better implementation of Newton-Rhapson method.

! 2008-04-22 Jan Amoraal
 - Added a jab configurable AlConfigurable.py, see for example OT scripts to use it
 - Added some OT alignment scripts
 - Modified the elements to be aligned property of GetElementsToBeAligned. It's now a list of strings.
   Usage:
     .Elements = { "Group : regex representing path to det elems : dof",
                   "Group : regex representing path to det elems : dof" }
   Where "Group :" and " : dof" are optional

! 2008-04-14 - Wouter Hulsbergen
 - added chi2 cut for outliers
 - added job option to specify input alignderivative files

! 2008-03-25 - Wouter Hulsbergen
 - Added vertex constraints

! 2008-03-24 - Adlene Hicheur
 - Moved AlFileIO.h and AlEquations.h to TAlignment/ for include (put the appropriate ifndef stuff, etc...
 - Added PersistSolv as a friend class in AlEquations.h 
 - Change after discussion: move  AlFileIO.h and AlEquations.{cpp,h} to AlignSolvTools

! 2008-03-06 - Wouter Hulsbergen
 - added option to use local frame as alignment frame

! 2008-03-04 - Johan Blouw
 - added possibility to align muon stations to GAlign class

! 2008-02-18 - Jan Amoraal
 - More monitoring and output

! 2008-02-13 - Jan AMORAAL
 - Added more monitoring
 - bug fix: Initialise array to 0 before constructing 3D transform.

! 2008-02-06 - Jan Amoraal
 - Plot total chi2 vs iteration
 - changes to reflect changes in DetDesc (replace XYZTranslation with Translation3D)

! 2008-02-04 - Wouter Hulsbergen
 - Added constraints for z-shearings (including z-scale)

! 2008-02-01 - Wouter Hulsbergen
 - New classes AlParameters and AlDofMask
 - Print parameter values when updating
 - Add constraints for global translation and rotation
 - Add threshold on minimum number of hits

! 2008-01-31 - Jan Amoraal
 - Plot chi2 variables vs iteration

! 2008-01-29 - Wouter Hulsbergen
 - Add more printouts in update
 - Add option to update in finalize

! 2008-01-27 - Jan AMORAAL
 - Can choose which global dofs to align for
 - Bug fix: in AlignmentElement.cpp 

! 2008-01-22 - Jan AMORAAL
 - clean-up
 - Added muon stations
 - Bug fix: apply correlations correctly
 - Use nodes in cavariance tools

! 2008-01-10 - Jan AMORAAL
 - Modified TrackFilterAlg to only keep hits that are in a to-be-aligned detelem

</PRE><H1><A NAME=v3r4>2007-12-19 TAlignment v3r4</A></H1><PRE>


- J. Blouw, 19/12/2007: tag v3r4 for alignment release v2r3
  - changes are listed below.


! 2007-12-19 - Jan Amoraal
 - Track projectors have changed (Needs: Rec v5r2)

! 2007-12-05 - Jan Amoraal
 - Added the ability to align ensembles 

! 2007-11-29 - Louis Nicolas
 - Fixed a few option names changes in OTAlignment.opts and Escher_nikhef.opts
 - Fixed a requirement to Det/STDet

! 2007-11-27 - Jan Amoraal
 - Added Velo boxes and modules

! 2007-11-15 - Johan Blouw
 - restored head of TAlignment package to v3r3...

! 2007-11-15 - Jan Amoraal
 - Framework++: More generic framework for the alignment of IT/OT
 - Removed:
  GetElementsToAlign.(h,cpp)
  AlignOTDetector.(h,cpp)
  AlignITDetector.(h,cpp)
  AlignmentFunctions.h
 - Added:
  IGetElementsToBeAligned.h
  GetElementsToBeAligned.(h,cpp)
  FindAlignmentElement.cpp
 - Modified AlignAlgorithm to use new classes and tools 

</PRE><H1><A NAME=v3r3>2007-11-13 TAlignment v3r3</A></H1><PRE>
! 2007-11-13 - Johan Blouw
 - new release of this package
 - removed small inconsistency in GetElementsToAlign with LHCB_v23

! 2007-11-06 - Louis Nicolas
 - GetElementsToAlign: added part for TT ladders
 - Bug fix in boxes part of AlignITDetector.cpp

! 2007-10-17 - Louis Nicolas
 - GetElementsToAlign: added TT specific part to get TT stations, layers and half-modules

! 2007-10-17 - Louis Nicolas
 - bug fix in AlignAlgorithm.cpp
 - GetElementsToAlign.cpp deals with OT modules and IT ladders
 - fixes in GetElementsToAlign.cpp

! 2007-10-16 - Gerhard Raven
 - add treatment of hit-hit correlations to AlignAlgorithm using Wouter's ResidualCovarianceTool
 - add ResidualCovarianceTool

! 2007-10-15 - Louis Nicolas
 - Added AlignITDetector: IT specific part in old framework

! 2007-10-15 - Louis Nicolas
 - GetElementsToAlign: added IT specific part to get IT stations, layers and boxes
 - TrackFilterAlg: changed interface to AlignSelTool track selector (now using TrackInterfaces/TrackSelector)

! 2007-10-15 - Johan Blouw
 - remove old tag, update package and retag TAlignment so that it can be part of ALIGNMENT_v2r1
 - NOTE: sometimes being practical supersedes being principal... (JB)

! 2007-10-12 - Jan Amoraal/H. Degaudenzi
 - Define boost functions explicitly in TrackFilterAlg.cpp (Jan Amoraal) to solve compiling problem on Windows OS.

! 2007-09-25 - Johan Blouw
 - removed several inconsistencies in AlignAlgorithm.cpp and AlignmentElement.h due to
   use of LHCB_v22r9
   - notably: calls to IGeometry used localDeltaParams changed to ownToOffNominalParams
              calls to IGeometry used localDeltaMatrix changed to ownToOffNominalMatrix
- NOTE: the package has been retagged for the soft project release.

! 2007-09-21 - Johan Blouw
 - modified requirements file such that only GAlign is
   visible to python through a linker library

! 2007-09-01 - Jan Amoraal
 - Added AlignmentElement and FindAlignment (Framework++)
 - Added a small testing algorithm

! 2007-08-30 - Johan Blouw
 - re-organizing GAlign class by moving tool-related code to TAConfig class.
 - added a linker library so that methods from GAlign can be called from
   python
 - added dictionaries for the above purpose
 - added modifications to the requirements file accordingly
 NOTE: this is not intended as a "best solution"; in a next release I'd 
 prefer to remove the linker library and the dictionaries.

! 2007-08-16 - Gerhard Raven
 - make sure the same pivot points are used consistently  in AlignAlgorithm
 - add some more monitoring

! 2007-08-16 - Jan Amoraal
 - Add the option to strip hits from a track before re-fitting it.
 - Move common code from AlignOTDetector to AlignmentFunctions
 - Add support for (linear) Lagrange multipliers
 - If no pivot points defined, use the 'local' (0,0,0) in global coordinates as default

! 2007-07-20 - Jan Amoraal
 - Added a small treack filter algorithm which filters tracks by type
 - Update and corretly apply DetElem alignment deltas using Juan's geometry free functions
 - Added a small alignment python script
 - Made AlignOTDetector more generic by using templates
 - Minor speed improvements and cleaning up
 - Removed src/IAlignDetectorSelector.h since it has been moved to AlignmentInterfaces

- Johan Blouw (same tag) 15/05/2007
  - removed *_load.cpp as it is not needed anymore

</PRE><H1><A NAME=v3r1>2007-05-14 TAlignment v3r1</A></H1><PRE>

- update requirements file for the software project release (J. Blouw)

- 2007-05-03 - Jan Amoraal
 - Update alignment constants (in memory)

- 2007-04-30 - Jan Amoraal
 - Solve system of linear eq. Ha=x using AlignSolvTools

</PRE><H1><A NAME=v3r0>2007-04-25 TAlignment v3r0</A></H1><PRE>
- 2007-04-25 - Johan Blouw
 - moved tool parts to AlignTrTools
 - moved interface to AlignmentInterfaces
 Contains now 3 algorithms:
  - AlignAlgorithm: Generic chi^2 minimisation algorithm
  - GAlign: performs alignment using Millepede for TT,OT & IT
  - TStation: algorithm to select tracks and store them in a dst

</PRE><H1><A NAME=v2r0>2007-03-29 TAlignment v2r0</A></H1><PRE>
- 2007-03-29 - Jan Amoraal
 - Fix includes

- 2007-03-19 - Jan Amoraal
 - Remove blah from requirements
  
- 2007-03-09 - Jan Amoraal
 - First version of the (T) Alignment Framework
 - AlignAlgorithm: Generic chi^2 minimisation algorithm
   IAlignDetectorSelector: Detector selector interface for alignment
   AlignOTDetector: Tool that provides information necessary for aligning the OT.

</PRE><H1><A NAME=v1r1>2007-02-05 TAlignment v1r1</A></H1><PRE>
- Johan Blouw
- small changes to requirements file to fullfill Escher requirements
     
</PRE><H1><A NAME=v1r0>2006-06-29 TAlignment v1r0</A></H1><PRE>
- Johan Blouw
- algorithm to be used for T-station alignment development

</PRE>
